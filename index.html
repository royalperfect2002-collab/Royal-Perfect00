<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Royal Perfect - Premium E-Commerce</title>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-storage.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #0a0e27;
            --secondary: #1a1f3a;
            --gold: #d4af37;
            --gold-light: #e8c547;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --border: #2a3f5f;
            --success: #31a24c;
            --warning: #ff9500;
            --error: #ff3333;
        }
        
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--primary);
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        .page { display: none; }
        .page.active { display: block; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 2000; align-items: center; justify-content: center; padding: 20px; overflow-y: auto; }
        .modal.active { display: flex; }
        
        .modal-content { 
            background: linear-gradient(135deg, var(--secondary) 0%, #0f1428 100%);
            border: 2px solid var(--gold);
            border-radius: 12px;
            padding: 30px;
            max-width: 900px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            border-bottom: 2px solid var(--gold);
            padding-bottom: 15px;
        }
        
        .modal-header h2 {
            color: var(--gold);
            font-size: 24px;
            font-weight: 700;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 32px;
            cursor: pointer;
        }
        
        .form-group {
            margin-bottom: 18px;
        }
        
        .form-group label {
            display: block;
            color: var(--gold);
            margin-bottom: 8px;
            font-size: 13px;
            font-weight: 700;
            text-transform: uppercase;
        }
        
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px 15px;
            background: var(--primary);
            border: 2px solid var(--border);
            color: var(--text-primary);
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
        }
        
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.4);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            color: #000;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            font-size: 13px;
            width: 100%;
            transition: all 0.3s;
        }
        
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(212, 175, 55, 0.3); }
        
        .btn-secondary {
            background: var(--border);
            color: var(--text-primary);
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 13px;
        }
        
        .btn-edit { background: #4CAF50; color: white; border: none; padding: 8px 14px; border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: 700; margin: 4px; }
        .btn-delete { background: var(--error); color: white; border: none; padding: 8px 14px; border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: 700; margin: 4px; }
        
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-bottom: 2px solid var(--gold);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 25px;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }
        
        .logo-img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid var(--gold);
            object-fit: cover;
        }
        
        .logo-text {
            font-size: 22px;
            font-weight: 800;
            color: var(--gold);
            text-transform: uppercase;
        }
        
        .search-box {
            flex: 1;
            display: flex;
            align-items: center;
            background: var(--text-primary);
            border-radius: 10px;
            height: 45px;
            max-width: 500px;
            min-width: 200px;
        }
        
        .search-box input {
            flex: 1;
            border: none;
            padding: 12px 15px;
            background: transparent;
            color: #000;
            font-size: 14px;
        }
        
        .search-btn {
            background: var(--gold);
            border: none;
            color: #000;
            padding: 0 18px;
            height: 100%;
            cursor: pointer;
            font-weight: 700;
        }
        
        .header-right {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .header-link {
            color: var(--text-primary);
            font-size: 14px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .header-link:hover { color: var(--gold); }
        
        .user-btn {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            color: #000;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 700;
            cursor: pointer;
            font-size: 14px;
        }
        
        .cart-icon {
            position: relative;
            cursor: pointer;
            font-size: 28px;
            color: var(--text-primary);
        }
        
        .cart-icon:hover { color: var(--gold); }
        
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--warning);
            color: white;
            border-radius: 50%;
            width: 26px;
            height: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }
        
        .navbar {
            background: linear-gradient(90deg, var(--secondary) 0%, #0f1428 100%);
            border-bottom: 1px solid var(--border);
            padding: 0;
            overflow-x: auto;
        }
        
        .navbar-items {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            gap: 0;
            padding: 0 20px;
        }
        
        .nav-item {
            padding: 14px 18px;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            transition: all 0.3s;
        }
        
        .nav-item:hover {
            border-bottom-color: var(--gold);
            color: var(--gold);
        }
        
        .banner {
            position: relative;
            width: 100%;
            height: 450px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 3px solid var(--gold);
        }
        
        .banner-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
        }
        
        .banner-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.45);
            z-index: 2;
        }
        
        .banner-content {
            position: relative;
            z-index: 3;
            text-align: center;
            color: var(--text-primary);
            padding: 40px 20px;
        }
        
        .banner-content h1 {
            font-size: 52px;
            color: var(--gold);
            margin-bottom: 15px;
            font-weight: 800;
        }
        
        .banner-content p {
            font-size: 18px;
            color: var(--text-secondary);
        }
        
        .social-links {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .social-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 8px;
            text-decoration: none;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--gold);
            transition: all 0.3s;
            overflow: hidden;
            cursor: pointer;
        }
        
        .social-link img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .social-link:hover {
            transform: scale(1.15);
            background: rgba(212, 175, 55, 0.5);
        }
        
        .main-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 30px 20px;
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 30px;
        }
        
        .sidebar {
            background: linear-gradient(135deg, var(--secondary) 0%, #0f1428 100%);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            height: fit-content;
            position: sticky;
            top: 120px;
        }
        
        .sidebar h3 {
            color: var(--gold);
            font-size: 16px;
            margin-bottom: 18px;
            font-weight: 800;
            border-bottom: 2px solid var(--gold);
            padding-bottom: 12px;
        }
        
        .filter-option {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            font-size: 14px;
            cursor: pointer;
            color: var(--text-secondary);
        }
        
        .filter-option input[type="checkbox"] {
            cursor: pointer;
            width: 18px;
            height: 18px;
            accent-color: var(--gold);
        }
        
        .products-section {
            background: linear-gradient(135deg, var(--secondary) 0%, #0f1428 100%);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 30px;
        }
        
        .section-title {
            color: var(--gold);
            font-size: 24px;
            margin-bottom: 25px;
            font-weight: 800;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .product-item {
            background: var(--primary);
            border: 2px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            cursor: pointer;
        }
        
        .product-item:hover {
            border-color: var(--gold);
            transform: translateY(-8px);
        }
        
        .product-image {
            width: 100%;
            height: 180px;
            background-size: cover;
            background-position: center;
            background-color: #1a1f3a;
        }
        
        .product-body {
            padding: 16px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .product-name {
            font-size: 14px;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .product-rating {
            font-size: 12px;
            color: var(--warning);
            margin-bottom: 10px;
        }
        
        .product-price {
            font-size: 20px;
            font-weight: 800;
            color: var(--gold);
            margin-bottom: 12px;
        }
        
        .product-buttons {
            display: flex;
            gap: 8px;
            margin-top: auto;
        }
        
        .btn-add-cart {
            flex: 1;
            background: var(--gold);
            color: #000;
            border: none;
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 700;
            cursor: pointer;
        }
        
        .btn-add-cart:hover { background: var(--gold-light); }
        
        .btn-view-detail {
            flex: 1;
            background: var(--border);
            color: var(--text-primary);
            border: none;
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 700;
            cursor: pointer;
        }
        
        .btn-view-detail:hover { background: #3a5f8f; }
        
        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            color: #000;
            padding: 15px 25px;
            border-radius: 10px;
            z-index: 3000;
            font-weight: 700;
            font-size: 14px;
            animation: slideInRight 0.4s ease;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .footer {
            background: var(--primary);
            border-top: 2px solid var(--gold);
            padding: 50px 20px;
            margin-top: 60px;
        }
        
        .footer-content {
            max-width: 1600px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .footer-col h4 {
            color: var(--gold);
            font-size: 14px;
            margin-bottom: 15px;
            font-weight: 800;
        }
        
        .footer-col ul {
            list-style: none;
        }
        
        .footer-col li {
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 13px;
        }
        
        .footer-bottom {
            border-top: 2px solid var(--border);
            padding-top: 25px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 13px;
        }
        
        .admin-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            color: #000;
            border: none;
            cursor: pointer;
            font-size: 24px;
            font-weight: 700;
            z-index: 999;
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
        }
        
        .admin-btn:hover { transform: scale(1.12); }
        
        .tabs {
            display: flex;
            gap: 0;
            border-bottom: 2px solid var(--border);
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            flex: 1;
            min-width: 100px;
            padding: 14px;
            background: var(--primary);
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-weight: 700;
            border-bottom: 3px solid transparent;
            text-transform: uppercase;
            font-size: 11px;
        }
        
        .tab-btn.active {
            color: var(--gold);
            border-bottom-color: var(--gold);
        }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        .sync-status {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 18px;
            background: rgba(49, 162, 76, 0.15);
            border: 2px solid #31a24c;
            border-radius: 8px;
            margin-bottom: 20px;
            color: #31a24c;
            font-size: 13px;
            font-weight: 700;
        }

        .product-detail-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .product-detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            background: linear-gradient(135deg, var(--secondary) 0%, #0f1428 100%);
            border: 2px solid var(--border);
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .product-detail-image {
            width: 100%;
            height: 400px;
            background-size: cover;
            background-position: center;
            border-radius: 12px;
            border: 2px solid var(--gold);
        }

        .product-detail-info h1 {
            color: var(--gold);
            font-size: 32px;
            margin-bottom: 20px;
            font-weight: 800;
        }

        .product-detail-price {
            font-size: 28px;
            color: var(--gold);
            font-weight: 800;
            margin-bottom: 20px;
        }

        .product-detail-rating {
            font-size: 16px;
            color: var(--warning);
            margin-bottom: 20px;
        }

        .product-detail-description {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 30px;
            font-size: 15px;
        }

        .product-detail-buttons {
            display: flex;
            gap: 15px;
        }

        .product-detail-buttons button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
        }

        .btn-buy {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            color: #000;
        }

        .btn-buy:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.3);
        }

        .btn-back {
            background: var(--border);
            color: var(--text-primary);
        }

        .btn-back:hover { background: #3a5f8f; }

        .review-section {
            background: linear-gradient(135deg, var(--secondary) 0%, #0f1428 100%);
            border: 2px solid var(--border);
            padding: 30px;
            border-radius: 12px;
            margin-top: 30px;
        }

        .review-section h2 {
            color: var(--gold);
            font-size: 22px;
            margin-bottom: 20px;
            font-weight: 800;
        }

        .add-review-form {
            background: var(--primary);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            border: 1px solid var(--border);
        }

        .star-rating {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .star {
            font-size: 32px;
            cursor: pointer;
            color: #444;
            transition: all 0.2s;
            user-select: none;
        }

        .star:hover {
            color: var(--gold);
            transform: scale(1.2);
        }

        .star.active {
            color: var(--gold);
        }

        .review-item {
            background: var(--primary);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid var(--border);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .review-author {
            color: var(--gold);
            font-weight: 700;
            font-size: 14px;
        }

        .review-date {
            color: var(--text-secondary);
            font-size: 12px;
        }

        .review-rating {
            color: var(--warning);
            font-size: 16px;
            margin-bottom: 10px;
        }

        .review-text {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .auth-container {
            max-width: 600px;
            margin: 80px auto;
            background: linear-gradient(135deg, var(--secondary) 0%, #0f1428 100%);
            border: 2px solid var(--border);
            padding: 40px;
            border-radius: 12px;
        }

        .auth-title {
            color: var(--gold);
            font-size: 28px;
            margin-bottom: 30px;
            font-weight: 800;
            text-align: center;
        }

        .auth-tabs {
            display: flex;
            gap: 0;
            border-bottom: 2px solid var(--border);
            margin-bottom: 30px;
        }

        .auth-tab {
            flex: 1;
            padding: 15px;
            background: var(--primary);
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-weight: 700;
            border-bottom: 3px solid transparent;
        }

        .auth-tab.active {
            color: var(--gold);
            border-bottom-color: var(--gold);
        }

        .auth-form { display: none; }
        .auth-form.active { display: block; }

        .profile-container {
            max-width: 900px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .profile-section {
            background: linear-gradient(135deg, var(--secondary) 0%, #0f1428 100%);
            border: 2px solid var(--border);
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .profile-section h2 {
            color: var(--gold);
            font-size: 20px;
            margin-bottom: 20px;
            font-weight: 800;
            border-bottom: 2px solid var(--gold);
            padding-bottom: 10px;
        }

        .profile-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .profile-field {
            background: var(--primary);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .profile-field label {
            display: block;
            color: var(--gold);
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .profile-field-value {
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
        }

        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid var(--gold);
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 1024px) {
            .main-container { grid-template-columns: 1fr; }
            .sidebar { display: none; }
            .products-grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); }
            .product-detail-grid { grid-template-columns: 1fr; }
        }
        
        @media (max-width: 768px) {
            .header-content { flex-direction: column; gap: 15px; }
            .search-box { order: 3; flex-basis: 100%; }
            .banner { height: 300px; }
            .banner-content h1 { font-size: 28px; }
            .product-detail-buttons { flex-direction: column; }
            .profile-grid { grid-template-columns: 1fr; }
            .social-links { gap: 8px; }
            .social-link { width: 40px; height: 40px; }
        }
    
        /* PAGINATION STYLES */
        .pagination-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            padding: 20px;
            background: rgba(212, 175, 55, 0.05);
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        .btn-pagination {
            background: var(--gold);
            color: var(--primary);
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .btn-pagination:hover {
            background: var(--gold-light);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }

        .btn-pagination:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .pagination-info {
            font-size: 16px;
            color: var(--gold);
            font-weight: bold;
            min-width: 120px;
            text-align: center;
        }

        #prevBtn:disabled,
        #nextBtn:disabled {
            background: var(--text-secondary);
            color: var(--primary);
            cursor: not-allowed;
        }
</style>
</head>
<body>

<!-- HOME PAGE -->
<div id="homePage" class="page active">
    <div class="header">
        <div class="header-content">
            <div class="logo-section" onclick="goHome()" style="cursor: pointer;">
                <img src="https://agi-prod-file-upload-public-main-use1.s3.amazonaws.com/4c5bf2f5-163f-4de2-9a92-2957ec6ecf83" alt="Royal Perfect" class="logo-img">
                <div class="logo-text">Royal Perfect</div>
            </div>
            <div class="search-box">
                <input type="text" id="searchBox" placeholder="Search products..." onkeyup="searchProducts()">
                <button class="search-btn" onclick="searchProducts()">üîç</button>
            </div>
            <div class="header-right">
                <div class="header-link" onclick="openAdminModal()">‚öôÔ∏è Admin</div>
                <button class="user-btn" onclick="goToAuth()">üîê Login</button>
                <div class="cart-icon" onclick="openCart()">üõí<span class="cart-badge" id="cartBadge">0</span></div>
            </div>
        </div>
    </div>

    <div class="navbar">
        <div class="navbar-items">
            <div class="nav-item" onclick="filterByCategory('all')">All Products</div>
            <div class="nav-item" onclick="filterByCategory('jewelry')">üíé Jewelry</div>
            <div class="nav-item" onclick="filterByCategory('sarees')">üëó Sarees</div>
            <div class="nav-item" onclick="filterByCategory('dresses')">üë† Dresses</div>
            <div class="nav-item" onclick="filterByCategory('accessories')">‚ú® Accessories</div>
        </div>
    </div>

    <div class="banner">
        <video id="bannerVideo" class="banner-video" autoplay muted loop playsinline>
            <source id="videoSource" src="https://commondatastorage.googleapis.com/gtv-videos-library/sample/BigBuckBunny.mp4" type="video/mp4">
        </video>
        <div class="banner-overlay"></div>
        <div class="banner-content">
            <h1>‚ú® Royal Perfect Premium ‚ú®</h1>
            <p>Luxury Jewelry ‚Ä¢ Designer Sarees ‚Ä¢ Elegant Fashion</p>
            <div class="social-links">
                <a id="gmailLink" href="javascript:void(0)" class="social-link" target="_blank" title="Gmail"><img id="gmailImg" src="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Crect fill=%22%23EA4335%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%22 y=%2260%22 font-size=%2240%22 fill=%22%23fff%22 text-anchor=%22middle%22%3Eüìß%3C/text%3E%3C/svg%3E" alt="Gmail"></a>
                <a id="whatsappLink" href="javascript:void(0)" class="social-link" target="_blank" title="WhatsApp"><img id="whatsappImg" src="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Crect fill=%2325D366%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%22 y=%2260%22 font-size=%2240%22 fill=%22%23fff%22 text-anchor=%22middle%22%3Eüí¨%3C/text%3E%3C/svg%3E" alt="WhatsApp"></a>
                <a id="instaLink" href="javascript:void(0)" class="social-link" target="_blank" title="Instagram"><img id="instaImg" src="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Cdefs%3E%3ClinearGradient id=%22ig%22 x1=%220%25%22 y1=%22100%25%22 x2=%22100%25%22 y2=%220%25%22%3E%3Cstop offset=%220%25%22 style=%22stop-color:%23fdf497%22/%3E%3Cstop offset=%2250%25%22 style=%22stop-color:%23fdf497%22/%3E%3Cstop offset=%2252%25%22 style=%22stop-color:%23fd5949%22/%3E%3Cstop offset=%22100%25%22 style=%22stop-color:%23d6249f%22/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill=%22url(%23ig)%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%22 y=%2260%22 font-size=%2240%22 fill=%22%23fff%22 text-anchor=%22middle%22%3Eüì∑%3C/text%3E%3C/svg%3E" alt="Instagram"></a>
                <a id="youtubeLink" href="javascript:void(0)" class="social-link" target="_blank" title="YouTube"><img id="youtubeImg" src="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Crect fill=%23FF0000%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%22 y=%2260%22 font-size=%2240%22 fill=%22%23fff%22 text-anchor=%22middle%22%3E‚ñ∂%3C/text%3E%3C/svg%3E" alt="YouTube"></a>
            </div>
        </div>
    </div>

    <div class="main-container">
        <div class="sidebar">
            <h3>üîç Price Filters</h3>
            <div class="filter-option"><input type="checkbox" id="price1" onchange="applyFilters()"><label for="price1">‚Çπ0 - ‚Çπ10</label></div>
            <div class="filter-option"><input type="checkbox" id="price2" onchange="applyFilters()"><label for="price2">‚Çπ10 - ‚Çπ50</label></div>
            <div class="filter-option"><input type="checkbox" id="price3" onchange="applyFilters()"><label for="price3">‚Çπ50 - ‚Çπ100</label></div>
            <div class="filter-option"><input type="checkbox" id="price4" onchange="applyFilters()"><label for="price4">‚Çπ100 - ‚Çπ200</label></div>
            <div class="filter-option"><input type="checkbox" id="price5" onchange="applyFilters()"><label for="price5">‚Çπ200 - ‚Çπ500</label></div>
            <div class="filter-option"><input type="checkbox" id="price6" onchange="applyFilters()"><label for="price6">‚Çπ500 - ‚Çπ1000</label></div>
            <div class="filter-option"><input type="checkbox" id="price7" onchange="applyFilters()"><label for="price7">‚Çπ1000 - ‚Çπ2000</label></div>
            <div class="filter-option"><input type="checkbox" id="price8" onchange="applyFilters()"><label for="price8">‚Çπ2000 - ‚Çπ3000</label></div>
            <div class="filter-option"><input type="checkbox" id="price9" onchange="applyFilters()"><label for="price9">‚Çπ3000 - ‚Çπ5000</label></div>
            <button class="btn-primary" onclick="clearFilters()" style="margin-top: 20px;">Clear All</button>
        </div>

        <div>
            <div class="products-section">
                <h2 class="section-title">Featured Products</h2>
                <div id="productsGrid" class="products-grid"></div>
                <div class="pagination-controls">
                    <button class="btn-pagination" id="prevBtn" onclick="previousPage()" style="display: none;">‚Üê Previous</button>
                    <div class="pagination-info">
                        <span id="pageNumber">Page 1</span> of <span id="totalPages">1</span>
                    </div>
                    <button class="btn-pagination" id="nextBtn" onclick="nextPage()">Next ‚Üí</button>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="footer-content">
            <div class="footer-col">
                <h4>Contact</h4>
                <ul>
                    <li>üì± WhatsApp: +91 8220390911</li>
                    <li>üìß Email: royalperfect2002@gmail.com</li>
                    <li>üìç Chennai, India</li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Quick Links</h4>
                <ul>
                    <li>About Us</li>
                    <li>Privacy Policy</li>
                    <li>FAQs</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">¬© 2025 Royal Perfect. All Rights Reserved.</div>
    </div>
</div>

<!-- PRODUCT DETAIL PAGE -->
<div id="productDetailPage" class="page">
    <div class="header">
        <div class="header-content">
            <div class="logo-section" onclick="goHome()" style="cursor: pointer;">
                <img src="https://agi-prod-file-upload-public-main-use1.s3.amazonaws.com/4c5bf2f5-163f-4de2-9a92-2957ec6ecf83" alt="Royal Perfect" class="logo-img">
                <div class="logo-text">Royal Perfect</div>
            </div>
            <div style="flex: 1;"></div>
            <div class="header-right">
                <div class="cart-icon" onclick="openCart()">üõí<span class="cart-badge" id="cartBadge2">0</span></div>
            </div>
        </div>
    </div>

    <div class="product-detail-container">
        <div class="product-detail-grid">
            <div class="product-detail-image" id="detailImage"></div>
            <div class="product-detail-info">
                <h1 id="detailName"></h1>
                <div class="product-detail-price">‚Çπ<span id="detailPrice"></span></div>
                <div class="product-detail-rating" id="detailRating"></div>
                <div class="product-detail-description" id="detailDesc"></div>
                <div class="product-detail-buttons">
                    <button class="btn-buy" onclick="addDetailToCart()">üõí Add to Cart</button>
                    <button class="btn-back" onclick="goHome()">‚Üê Back</button>
                </div>
            </div>
        </div>

        <div class="review-section">
            <h2>‚≠ê Reviews & Ratings</h2>
            
            <!-- ADD REVIEW FORM -->
            <div class="add-review-form">
                <h3 style="color: var(--gold); margin-bottom: 15px; font-size: 16px;">‚úçÔ∏è Add Your Review</h3>
                <div class="form-group">
                    <label>Your Name</label>
                    <input type="text" id="reviewAuthor" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label>Rating - Click Stars to Rate</label>
                    <div class="star-rating" id="starRating">
                        <span class="star" data-rating="1" onclick="setRating(1)">‚≠ê</span>
                        <span class="star" data-rating="2" onclick="setRating(2)">‚≠ê</span>
                        <span class="star" data-rating="3" onclick="setRating(3)">‚≠ê</span>
                        <span class="star" data-rating="4" onclick="setRating(4)">‚≠ê</span>
                        <span class="star" data-rating="5" onclick="setRating(5)">‚≠ê</span>
                    </div>
                    <p style="color: var(--text-secondary); font-size: 12px; margin-top: 8px;">Selected: <span id="selectedRating">0</span>/5 Stars</p>
                </div>
                <div class="form-group">
                    <label>Your Review</label>
                    <textarea id="reviewText" placeholder="Share your experience..." style="min-height: 80px;"></textarea>
                </div>
                <button class="btn-primary" onclick="submitReview()" style="margin-bottom: 10px;">üìù Submit Review</button>
            </div>

            <!-- REVIEWS LIST -->
            <div id="reviewsList"></div>
        </div>
    </div>

    <div class="footer">
        <div class="footer-content">
            <div class="footer-col">
                <h4>Contact</h4>
                <ul>
                    <li>üì± WhatsApp: +91 8220390911</li>
                    <li>üìß Email: royalperfect2002@gmail.com</li>
                    <li>üìç Chennai, India</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">¬© 2025 Royal Perfect. All Rights Reserved.</div>
    </div>
</div>

<!-- AUTH PAGE -->
<div id="authPage" class="page">
    <div class="header">
        <div class="header-content">
            <div class="logo-section" onclick="goHome()" style="cursor: pointer;">
                <img src="https://agi-prod-file-upload-public-main-use1.s3.amazonaws.com/4c5bf2f5-163f-4de2-9a92-2957ec6ecf83" alt="Royal Perfect" class="logo-img">
                <div class="logo-text">Royal Perfect</div>
            </div>
            <div style="flex: 1;"></div>
            <div class="header-right">
                <div class="cart-icon" onclick="openCart()">üõí<span class="cart-badge" id="cartBadge3">0</span></div>
            </div>
        </div>
    </div>

    <div class="auth-container">
        <div class="auth-title">üë§ Account</div>
        
        <div class="auth-tabs">
            <button class="auth-tab active" onclick="switchAuthTab('login')">üîê Login</button>
            <button class="auth-tab" onclick="switchAuthTab('signup')">‚úçÔ∏è Sign Up</button>
        </div>

        <form class="auth-form active" id="loginForm" onsubmit="handleLogin(event)">
            <div class="form-group">
                <label>Email or Mobile</label>
                <input type="text" id="loginEmail" placeholder="Enter email or mobile" required>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="loginPassword" placeholder="Enter password" required>
            </div>
            <button type="submit" class="btn-primary">üîì Login</button>
        </form>

        <form class="auth-form" id="signupForm" onsubmit="handleSignup(event)">
            <div class="form-group">
                <label>Full Name</label>
                <input type="text" id="signupName" placeholder="Enter your name" required>
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="signupEmail" placeholder="Enter email" required>
            </div>
            <div class="form-group">
                <label>Mobile</label>
                <input type="tel" id="signupMobile" placeholder="10 digit number" pattern="[0-9]{10}" required>
            </div>
            <div class="form-group">
                <label>Address</label>
                <textarea id="signupAddress" placeholder="Enter address" required></textarea>
            </div>
            <div class="form-group">
                <label>City</label>
                <input type="text" id="signupCity" placeholder="City name" required>
            </div>
            <div class="form-group">
                <label>State</label>
                <input type="text" id="signupState" placeholder="State name" required>
            </div>
            <div class="form-group">
                <label>Postal Code</label>
                <input type="text" id="signupPostal" placeholder="Postal code" required>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="signupPassword" placeholder="Create password" required>
            </div>
            <div class="form-group">
                <label>Confirm Password</label>
                <input type="password" id="signupConfirm" placeholder="Confirm password" required>
            </div>
            <button type="submit" class="btn-primary">‚úçÔ∏è Create Account</button>
        </form>

        <button class="btn-secondary" onclick="goHome()" style="width: 100%; margin-top: 20px;">‚Üê Back</button>
    </div>

    <div class="footer">
        <div class="footer-bottom" style="margin-top: 100px;">¬© 2025 Royal Perfect. All Rights Reserved.</div>
    </div>
</div>

<!-- PROFILE PAGE -->
<div id="profilePage" class="page">
    <div class="header">
        <div class="header-content">
            <div class="logo-section" onclick="goHome()" style="cursor: pointer;">
                <img src="https://agi-prod-file-upload-public-main-use1.s3.amazonaws.com/4c5bf2f5-163f-4de2-9a92-2957ec6ecf83" alt="Royal Perfect" class="logo-img">
                <div class="logo-text">Royal Perfect</div>
            </div>
            <div style="flex: 1;"></div>
            <div class="header-right">
                <button class="user-btn" onclick="logout()" style="background: var(--error);">üö™ Logout</button>
                <div class="cart-icon" onclick="openCart()">üõí<span class="cart-badge" id="cartBadge4">0</span></div>
            </div>
        </div>
    </div>

    <div class="profile-container">
        <div class="profile-section">
            <h2>üë§ Personal Information</h2>
            <div class="profile-grid">
                <div class="profile-field">
                    <label>Name</label>
                    <div class="profile-field-value" id="profileName"></div>
                </div>
                <div class="profile-field">
                    <label>Email</label>
                    <div class="profile-field-value" id="profileEmail"></div>
                </div>
                <div class="profile-field">
                    <label>Mobile</label>
                    <div class="profile-field-value" id="profileMobile"></div>
                </div>
            </div>
            <button class="btn-primary" onclick="openEditPersonal()">‚úèÔ∏è Edit Personal Info</button>
        </div>

        <div class="profile-section">
            <h2>üè† Address & Contact</h2>
            <div class="profile-grid">
                <div class="profile-field">
                    <label>Address</label>
                    <div class="profile-field-value" id="profileAddress"></div>
                </div>
                <div class="profile-field">
                    <label>City</label>
                    <div class="profile-field-value" id="profileCity"></div>
                </div>
                <div class="profile-field">
                    <label>State</label>
                    <div class="profile-field-value" id="profileState"></div>
                </div>
                <div class="profile-field">
                    <label>Postal Code</label>
                    <div class="profile-field-value" id="profilePostal"></div>
                </div>
            </div>
            <button class="btn-primary" onclick="openEditAddress()">‚úèÔ∏è Edit Address</button>
        </div>
    </div>

    <div class="footer">
        <div class="footer-bottom" style="margin-top: 100px;">¬© 2025 Royal Perfect. All Rights Reserved.</div>
    </div>
</div>

<!-- ADMIN BUTTON -->
<button class="admin-btn" onclick="openAdminModal()">‚öôÔ∏è</button>

<!-- ADMIN MODAL -->
<div id="adminModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>‚öôÔ∏è Admin Panel</h2>
            <button class="modal-close" onclick="closeAdminModal()">‚úï</button>
        </div>

        <div id="adminPasswordSection">
            <div class="form-group">
                <label>üîê Admin Password</label>
                <input type="password" id="adminPass" placeholder="Enter password" onkeypress="if(event.key==='Enter') verifyAdmin()">
            </div>
            <button class="btn-primary" onclick="verifyAdmin()">Access Admin</button>
        </div>

        <div id="adminContent" style="display: none;">
            <div class="sync-status">
                <span style="width: 10px; height: 10px; background: #31a24c; border-radius: 50%; display: inline-block;"></span>
                <span id="syncStatusText">‚úÖ Syncing with Firebase...</span>
            </div>

            <div class="tabs">
                <button class="tab-btn active" onclick="switchAdminTab('video')">üé¨ Video</button>
                <button class="tab-btn" onclick="switchAdminTab('links')">üîó Links</button>
                <button class="tab-btn" onclick="switchAdminTab('icons')">üé® Icons</button>
                <button class="tab-btn" onclick="switchAdminTab('products')">üì¶ Products</button>
                <button class="tab-btn" onclick="switchAdminTab('reviews')">‚≠ê Reviews</button>
                <button class="tab-btn" onclick="switchAdminTab('orders')">üìã Orders</button>
            </div>

            <!-- VIDEO TAB -->
            <div id="videoTab" class="tab-content active">
                <h3 style="color: var(--gold); margin: 20px 0 15px 0;">üé¨ Upload Banner Video</h3>
                <div class="form-group">
                    <label>üìπ Select Video (PC/Mobile)</label>
                    <input type="file" id="videoFileInput" accept="video/*">
                </div>
                <button class="btn-primary" onclick="uploadVideo()">üöÄ Upload</button>
            </div>

            <!-- LINKS TAB -->
            <div id="linksTab" class="tab-content">
                <h3 style="color: var(--gold); margin: 20px 0 15px 0;">üîó Edit Contact Links</h3>
                <div class="form-group">
                    <label>üìß Gmail Email Address</label>
                    <input type="email" id="gmailEmail" placeholder="royalperfect2002@gmail.com">
                </div>
                <div class="form-group">
                    <label>üì± WhatsApp Number (with country code)</label>
                    <input type="text" id="whatsappNumber" placeholder="918220390911">
                </div>
                <div class="form-group">
                    <label>üì∑ Instagram Profile URL</label>
                    <input type="text" id="instaUrl" placeholder="https://instagram.com/yourprofile">
                </div>
                <div class="form-group">
                    <label>‚ñ∂Ô∏è YouTube Channel URL</label>
                    <input type="text" id="youtubeUrl" placeholder="https://youtube.com/yourchannel">
                </div>
                <button class="btn-primary" onclick="saveContactLinks()">üíæ Save Links</button>
            </div>

            <!-- ICONS TAB -->
            <div id="iconsTab" class="tab-content">
                <h3 style="color: var(--gold); margin: 20px 0 15px 0;">üé® Upload Social Media Icons</h3>
                <div class="form-group">
                    <label>üìß Gmail Icon (Image)</label>
                    <input type="file" id="gmailIconInput" accept="image/*">
                    <button class="btn-primary" onclick="uploadGmailIcon()" style="margin-top: 8px;">Upload Gmail</button>
                </div>
                <div class="form-group">
                    <label>üì± WhatsApp Icon (Image)</label>
                    <input type="file" id="whatsappIconInput" accept="image/*">
                    <button class="btn-primary" onclick="uploadWhatsappIcon()" style="margin-top: 8px;">Upload WhatsApp</button>
                </div>
                <div class="form-group">
                    <label>üì∑ Instagram Icon (Image)</label>
                    <input type="file" id="instaIconInput" accept="image/*">
                    <button class="btn-primary" onclick="uploadInstaIcon()" style="margin-top: 8px;">Upload Instagram</button>
                </div>
                <div class="form-group">
                    <label>‚ñ∂Ô∏è YouTube Icon (Image)</label>
                    <input type="file" id="youtubeIconInput" accept="image/*">
                    <button class="btn-primary" onclick="uploadYoutubeIcon()" style="margin-top: 8px;">Upload YouTube</button>
                </div>
            </div>

            <!-- PRODUCTS TAB -->
            <div id="productsTab" class="tab-content">
                <h3 style="color: var(--gold); margin: 20px 0 15px 0;">‚ûï Add New Product</h3>
                <div class="form-group">
                    <label>Product Name</label>
                    <input type="text" id="newProdName" placeholder="Product name">
                </div>
                <div class="form-group">
                    <label>Price (‚Çπ)</label>
                    <input type="number" id="newProdPrice" placeholder="Price" min="0">
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select id="newProdCategory">
                        <option value="jewelry">üíé Jewelry</option>
                        <option value="sarees">üëó Sarees</option>
                        <option value="dresses">üë† Dresses</option>
                        <option value="accessories">‚ú® Accessories</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="newProdDesc" placeholder="Product description" style="min-height: 80px;"></textarea>
                </div>
                <div class="form-group">
                    <label>Product Image (Upload from PC/Mobile)</label>
                    <input type="file" id="newProdImage" accept="image/*">
                </div>
                <button class="btn-primary" onclick="addProduct()">‚úÖ Add Product</button>

                <h3 style="color: var(--gold); margin: 30px 0 15px 0;">üìä All Products - Edit & Manage</h3>
                <div id="adminProductsList" style="max-height: 400px; overflow-y: auto;"></div>

                <!-- UNLIMITED PRODUCT EDITING INTERFACE -->
                <div style="margin-top: 20px; padding: 15px; background: rgba(212,175,55,0.1); border: 1px solid var(--gold); border-radius: 8px;">
                    <h4 style="color: var(--gold); margin-bottom: 15px;">üîß UNLIMITED PRODUCT EDITOR - Edit All Products</h4>

                    <div style="margin-bottom: 15px;">
                        <input type="text" id="searchProduct" placeholder="üîç Search product by name..." style="width: 100%; padding: 10px; background: var(--primary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); margin-bottom: 10px;">
                    </div>

                    <div id="productsEditList" style="max-height: 500px; overflow-y: auto; background: var(--primary); border: 1px solid var(--border); border-radius: 4px; padding: 10px;"></div>

                    <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border);">
                        <h5 style="color: var(--gold); margin-bottom: 10px;">üìù EDIT PRODUCT DETAILS</h5>
                        <input type="hidden" id="editProductId">

                        <div class="form-group">
                            <label>Product Name</label>
                            <input type="text" id="editProductName" placeholder="Enter product name" style="width: 100%; padding: 8px;">
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <div class="form-group">
                                <label>Price (‚Çπ)</label>
                                <input type="number" id="editProductPrice" placeholder="Enter price" style="width: 100%; padding: 8px;">
                            </div>
                            <div class="form-group">
                                <label>Category</label>
                                <select id="editProductCategory" style="width: 100%; padding: 8px;">
                                    <option value="jewelry">üíé Jewelry</option>
                                    <option value="sarees">üëó Sarees</option>
                                    <option value="dresses">üë† Dresses</option>
                                    <option value="accessories">‚ú® Accessories</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="editProductDescription" placeholder="Enter product description" style="width: 100%; padding: 8px; height: 60px; resize: vertical;"></textarea>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                            <button class="btn-primary" onclick="saveProductEdit()" style="width: 100%; background: var(--gold); color: var(--primary);">üíæ Save Changes</button>
                            <button class="btn-primary" onclick="deleteProductEdit()" style="width: 100%; background: var(--error);">üóëÔ∏è Delete Product</button>
                            <button class="btn-primary" onclick="clearProductEditForm()" style="width: 100%; background: var(--text-secondary);">‚ùå Clear</button>
                        </div>
                    </div>
                </div>
                </div>
            </div>

            <!-- REVIEWS TAB -->
            <div id="reviewsTab" class="tab-content">
                
                <h3 style="color: var(--gold); margin: 20px 0 15px 0; padding-top: 20px; border-top: 1px solid var(--border);">üìÑ Pagination Settings</h3>
                <div class="form-group">
                    <label>Items Per Page</label>
                    <input type="number" id="itemsPerPage" value="9" min="1" max="30">
                    <small style="color: var(--text-secondary); display: block; margin-top: 5px;">Default: 9 (3x3 grid). Change to 12 for 4x3 grid, etc.</small>
                </div>
                <button class="btn-primary" onclick="updatePaginationSettings()" style="margin-top: 10px;">üíæ Save Pagination Settings</button>
                <button class="btn-secondary" onclick="loadSampleProducts()" style="margin-top: 10px;">üìä Load Sample Products (27 items)</button>

                <h3 style="color: var(--gold); margin: 30px 0 15px 0; padding-top: 20px; border-top: 1px solid var(--border);">üìÅ CATEGORY MANAGEMENT</h3>

                <div style="margin-bottom: 20px; padding: 15px; background: rgba(212,175,55,0.1); border-radius: 8px;">
                    <h4 style="color: var(--gold); margin-bottom: 15px;">‚ûï ADD NEW CATEGORY</h4>

                    <div class="form-group">
                        <label>Category Name</label>
                        <input type="text" id="newCategoryName" placeholder="e.g., Watches, Accessories" style="width: 100%; padding: 10px; background: var(--primary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary);">
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div class="form-group">
                            <label>Category Icon/Emoji or Upload Image</label>
                            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                                <input type="text" id="newCategoryIcon" placeholder="Emoji: ‚åö üéÅ üìø" maxlength="2" style="flex: 1; padding: 10px; background: var(--primary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); font-size: 20px;">
                                <input type="file" id="newCategoryIconUpload" accept="image/*" style="flex: 1; padding: 8px; background: var(--primary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); cursor: pointer;">
                            </div>
                            <small style="color: var(--text-secondary);">Use emoji OR upload image from PC/Mobile. Will save to Firebase Storage.</small>
                        </div>
                        <div class="form-group">
                            <label>Category Color (Optional)</label>
                            <input type="color" id="newCategoryColor" value="#d4af37" style="width: 100%; padding: 5px; height: 40px; border: 1px solid var(--border); border-radius: 4px; cursor: pointer;">
                        </div>
                    </div>

                    <button class="btn-primary" onclick="addCategory()" style="width: 100%; background: var(--success);">‚úÖ Add Category</button>
                </div>

                <div style="padding: 15px; background: var(--secondary); border-radius: 8px;">
                    <h4 style="color: var(--gold); margin-bottom: 15px;">üìã EXISTING CATEGORIES - Edit or Delete</h4>
                    <div id="categoriesList" style="max-height: 400px; overflow-y: auto;"></div>
                </div>

                <h3 style="color: var(--gold); margin: 20px 0 15px 0;">‚≠ê Manage Product Reviews</h3>
                <div id="adminReviewsList" style="max-height: 500px; overflow-y: auto;"></div>
            </div>

            <!-- ORDERS TAB -->
            <div id="ordersTab" class="tab-content">
                <h3 style="color: var(--gold); margin: 20px 0 15px 0;">üìã Customer Orders</h3>
                <div id="adminOrdersList"></div>
            </div>
        </div>
    </div>
</div>

<!-- CART MODAL -->
<div id="cartModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>üõí Shopping Cart</h2>
            <button class="modal-close" onclick="closeCart()">‚úï</button>
        </div>
        <div id="cartItemsContainer" style="max-height: 400px; overflow-y: auto; margin-bottom: 20px;"></div>
        <div style="background: var(--primary); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span>Subtotal:</span>
                <span id="subtotalPrice" style="color: var(--gold); font-weight: 700;">‚Çπ0</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span>Shipping:</span>
                <span style="color: var(--success);">FREE</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding-top: 10px; border-top: 1px solid var(--border); font-weight: 700;">
                <span>Total:</span>
                <span id="totalPrice" style="color: var(--gold);">‚Çπ0</span>
            </div>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="btn-primary" onclick="closeCart()" style="flex: 1;">Continue Shopping</button>
            <button class="btn-primary" onclick="proceedCheckout()" style="flex: 1;">Checkout</button>
        </div>
    </div>
</div>

<!-- EDIT MODALS -->
<div id="editPersonalModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>‚úèÔ∏è Edit Personal Info</h2>
            <button class="modal-close" onclick="closeEditPersonal()">‚úï</button>
        </div>
        <div class="form-group"><label>Name</label><input type="text" id="editName"></div>
        <div class="form-group"><label>Email</label><input type="email" id="editEmail"></div>
        <div class="form-group"><label>Mobile</label><input type="tel" id="editMobile"></div>
        <button class="btn-primary" onclick="savePersonalInfo()">üíæ Save</button>
    </div>
</div>

<div id="editAddressModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>‚úèÔ∏è Edit Address</h2>
            <button class="modal-close" onclick="closeEditAddress()">‚úï</button>
        </div>
        <div class="form-group"><label>Address</label><input type="text" id="editAddress"></div>
        <div class="form-group"><label>City</label><input type="text" id="editCity"></div>
        <div class="form-group"><label>State</label><input type="text" id="editState"></div>
        <div class="form-group"><label>Postal Code</label><input type="text" id="editPostal"></div>
        <button class="btn-primary" onclick="saveAddressInfo()">üíæ Save</button>
    </div>
</div>

<script>
// ===== FIREBASE CONFIG =====
const firebaseConfig = {
    apiKey: "AIzaSyDYZ-5Q1J7m-6Q4X7Y8Z9A0B1C2D3E4F5G6",
    authDomain: "royal-perfect-store.firebaseapp.com",
    databaseURL: "https://royal-perfect-store-default-rtdb.firebaseio.com",
    projectId: "royal-perfect-store",
    storageBucket: "royal-perfect-store.appspot.com",
    messagingSenderId: "123456789012",
    appId: "1:123456789012:web:abcdef1234567890"
};

let firebaseReady = false;
let db = null;

// Initialize Firebase
try {
    firebase.initializeApp(firebaseConfig);
    db = firebase.database();
    firebaseReady = true;
    console.log('‚úÖ Firebase Initialized Successfully');
} catch(e) {
    console.log('‚ö†Ô∏è Firebase Config - Using Local Storage Fallback');
    firebaseReady = false;
}

// ===== APP VARIABLES =====
let allProducts = [];

        // ===== CATEGORY MANAGEMENT SYSTEM (NEW) =====
        let categories = [
            { id: 'cat1', name: 'Jewelry', icon: 'üíé', color: '#d4af37' },
            { id: 'cat2', name: 'Sarees', icon: 'üëó', color: '#d4af37' },
            { id: 'cat3', name: 'Dresses', icon: 'üë†', color: '#d4af37' },
            { id: 'cat4', name: 'Accessories', icon: '‚ú®', color: '#d4af37' }
        ];
        // ===== END CATEGORY MANAGEMENT =====

        // SAMPLE PRODUCTS FOR TESTING (27 products = 3 pages)
        const sampleProducts = [
            { id: 'sample1', name: 'Gold Chandelier Earrings', price: 1500, image: 'https://via.placeholder.com/300x300?text=Gold+Earrings', category: 'Jewelry', description: 'Beautiful gold chandelier earrings perfect for any occasion', avgRating: 5 },
            { id: 'sample2', name: 'Diamond Stud Collection', price: 2500, image: 'https://via.placeholder.com/300x300?text=Diamond+Studs', category: 'Jewelry', description: 'Elegant diamond stud earrings with premium finish', avgRating: 5 },
            { id: 'sample3', name: 'Pearl Pendant Necklace', price: 1800, image: 'https://via.placeholder.com/300x300?text=Pearl+Necklace', category: 'Jewelry', description: 'Classic pearl pendant with gold chain', avgRating: 4 },
            { id: 'sample4', name: 'Silk Saree - Maroon', price: 3500, image: 'https://via.placeholder.com/300x300?text=Maroon+Saree', category: 'Sarees', description: 'Traditional maroon silk saree with gold border', avgRating: 5 },
            { id: 'sample5', name: 'Cotton Saree - Blue', price: 2000, image: 'https://via.placeholder.com/300x300?text=Blue+Saree', category: 'Sarees', description: 'Light blue cotton saree for casual wear', avgRating: 4 },
            { id: 'sample6', name: 'Designer Saree - Red', price: 4500, image: 'https://via.placeholder.com/300x300?text=Red+Saree', category: 'Sarees', description: 'Premium red designer saree with embroidery', avgRating: 5 },
            { id: 'sample7', name: 'Evening Gown - Black', price: 3000, image: 'https://via.placeholder.com/300x300?text=Black+Gown', category: 'Dresses', description: 'Elegant black evening gown', avgRating: 5 },
            { id: 'sample8', name: 'Casual Dress - Floral', price: 1200, image: 'https://via.placeholder.com/300x300?text=Floral+Dress', category: 'Dresses', description: 'Colorful floral printed casual dress', avgRating: 4 },
            { id: 'sample9', name: 'Party Dress - Gold', price: 2200, image: 'https://via.placeholder.com/300x300?text=Gold+Dress', category: 'Dresses', description: 'Shiny gold party dress perfect for celebrations', avgRating: 5 },

            // PAGE 2
            { id: 'sample10', name: 'Bangles Set - Gold', price: 800, image: 'https://via.placeholder.com/300x300?text=Gold+Bangles', category: 'Accessories', description: 'Traditional gold-plated bangles set', avgRating: 4 },
            { id: 'sample11', name: 'Hair Clips - Studded', price: 500, image: 'https://via.placeholder.com/300x300?text=Hair+Clips', category: 'Accessories', description: 'Sparkly studded hair clips for all occasions', avgRating: 4 },
            { id: 'sample12', name: 'Waist Chain - Silver', price: 1000, image: 'https://via.placeholder.com/300x300?text=Waist+Chain', category: 'Accessories', description: 'Elegant silver waist chain accessory', avgRating: 5 },
            { id: 'sample13', name: 'Jhumka Earrings - Red', price: 600, image: 'https://via.placeholder.com/300x300?text=Red+Jhumka', category: 'Jewelry', description: 'Traditional red jhumka earrings', avgRating: 4 },
            { id: 'sample14', name: 'Bridal Bracelet', price: 2800, image: 'https://via.placeholder.com/300x300?text=Bridal+Bracelet', category: 'Jewelry', description: 'Luxurious bridal bracelet collection', avgRating: 5 },
            { id: 'sample15', name: 'Festive Saree - Purple', price: 3200, image: 'https://via.placeholder.com/300x300?text=Purple+Saree', category: 'Sarees', description: 'Beautiful purple festive saree', avgRating: 5 },
            { id: 'sample16', name: 'Lehenga Saree - Peach', price: 4000, image: 'https://via.placeholder.com/300x300?text=Peach+Lehenga', category: 'Sarees', description: 'Stunning peach lehenga saree', avgRating: 5 },
            { id: 'sample17', name: 'Midi Dress - Green', price: 1500, image: 'https://via.placeholder.com/300x300?text=Green+Dress', category: 'Dresses', description: 'Fresh green midi dress for summer', avgRating: 4 },
            { id: 'sample18', name: 'Summer Dress - White', price: 1300, image: 'https://via.placeholder.com/300x300?text=White+Dress', category: 'Dresses', description: 'Light white summer dress collection', avgRating: 4 },

            // PAGE 3
            { id: 'sample19', name: 'Ankle Bracelet - Gold', price: 700, image: 'https://via.placeholder.com/300x300?text=Ankle+Bracelet', category: 'Accessories', description: 'Delicate gold ankle bracelet', avgRating: 4 },
            { id: 'sample20', name: 'Nose Ring Collection', price: 400, image: 'https://via.placeholder.com/300x300?text=Nose+Ring', category: 'Accessories', description: 'Traditional and modern nose ring designs', avgRating: 4 },
            { id: 'sample21', name: 'Tikka - Silver', price: 1200, image: 'https://via.placeholder.com/300x300?text=Silver+Tikka', category: 'Jewelry', description: 'Elegant silver tikka for special occasions', avgRating: 5 },
            { id: 'sample22', name: 'Ring Set - Diamond', price: 3500, image: 'https://via.placeholder.com/300x300?text=Diamond+Ring', category: 'Jewelry', description: 'Premium diamond ring set', avgRating: 5 },
            { id: 'sample23', name: 'Ethnic Saree - Cream', price: 2800, image: 'https://via.placeholder.com/300x300?text=Cream+Saree', category: 'Sarees', description: 'Beautiful cream ethnic saree', avgRating: 5 },
            { id: 'sample24', name: 'Silk Saree - Green', price: 3800, image: 'https://via.placeholder.com/300x300?text=Green+Saree', category: 'Sarees', description: 'Rich green silk saree with designer border', avgRating: 5 },
            { id: 'sample25', name: 'Cocktail Dress - Pink', price: 2000, image: 'https://via.placeholder.com/300x300?text=Pink+Dress', category: 'Dresses', description: 'Chic pink cocktail dress', avgRating: 4 },
            { id: 'sample26', name: 'Formal Dress - Navy', price: 2500, image: 'https://via.placeholder.com/300x300?text=Navy+Dress', category: 'Dresses', description: 'Formal navy blue dress for professional look', avgRating: 5 },
            { id: 'sample27', name: 'Beaded Saree - Gold', price: 5000, image: 'https://via.placeholder.com/300x300?text=Gold+Beaded', category: 'Sarees', description: 'Luxurious beaded gold saree', avgRating: 5 }
        ];

let cart = [];
let allOrders = [];
let allUsers = [];
let allReviews = [];
let contactLinks = {};
let currentUser = null;
let currentProductId = null;
let currentRating = 0;
const ADMIN_PASSWORD = "prakashrosy21";

// ===== INITIALIZATION =====
document.addEventListener('DOMContentLoaded', function() {
    console.log('üöÄ App Loading...');
    loadAllData();
    initDefaultProducts();
    loadSocialIcons();
    loadContactLinks();
    updateSocialLinks();
    displayProducts();
    updateCartBadge();
    loadCurrentUser();
    console.log('‚úÖ App Ready');
});

// ===== FIREBASE SYNC FUNCTIONS =====
function syncDataToFirebase() {
    if (!firebaseReady || !db) return;
    
    try {
        const data = {
            products: allProducts,
            cart: cart,
            orders: allOrders,
            users: allUsers,
            reviews: allReviews,
            timestamp: new Date().toISOString()
        };
        
        db.ref('royalPerfectData').set(data).then(() => {
            console.log('‚úÖ Data synced to Firebase');
            updateSyncStatus('‚úÖ Firebase Sync Active');
        }).catch(error => {
            console.log('‚ö†Ô∏è Firebase sync error:', error);
            updateSyncStatus('‚úÖ Local Storage Sync Active');
        });
    } catch(e) {
        console.log('Local storage backup');
    }
}

function loadDataFromFirebase() {
    if (!firebaseReady || !db) {
        loadAllData();
        return;
    }
    
    try {
        db.ref('royalPerfectData').once('value').then(snapshot => {
            if (snapshot.exists()) {
                const data = snapshot.val();
                allProducts = data.products || [];
                cart = data.cart || [];
                allOrders = data.orders || [];
                allUsers = data.users || [];
                allReviews = data.reviews || [];
                console.log('‚úÖ Data loaded from Firebase');
                initPagination();
            } else {
                loadAllData();
            }
        }).catch(error => {
            console.log('‚ö†Ô∏è Error loading from Firebase:', error);
            loadAllData();
        });
    } catch(e) {
        loadAllData();
    }
}

function updateSyncStatus(status) {
    const element = document.getElementById('syncStatusText');
    if (element) element.textContent = status;
}

// ===== LOCAL STORAGE FUNCTIONS =====
function loadAllData() {
            // Load from Firebase or initialize
            allProducts = [
                { id: '1', name: '‚ú® Gold Pendant', price: 2500, category: 'jewelry', description: 'Premium 18K gold with certified diamond.', image: 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 200 200%22%3E%3Crect fill=%22%23d4af37%22 width=%22200%22 height=%22200%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 font-size=%2224%22 text-anchor=%22middle%22 fill=%22%23000%22 dy=%22.3em%22%3EGold Pendant%3C/text%3E%3C/svg%3E', avgRating: 5 },
            ];
            currentPage = 1;
            itemsPerPage = 9;
            totalPages = 1;
            filteredByPrice = [];
            displayPaginatedProducts();
        }

        // OLD LOAD ALL (KEPT FOR COMPATIBILITY)
        function loadAllDataOld() {
    const saved = localStorage.getItem('royalPerfectData');
    if (saved) {
        try {
            const data = JSON.parse(saved);
            allProducts = data.products || [];
            cart = data.cart || [];
            allOrders = data.orders || [];
            allUsers = data.users || [];
            allReviews = data.reviews || [];
        } catch(e) {}
    }
}

function saveAllData() {
    const data = { products: allProducts, cart: cart, orders: allOrders, users: allUsers, reviews: allReviews };
    localStorage.setItem('royalPerfectData', JSON.stringify(data));
    syncDataToFirebase();
}

function loadCurrentUser() {
    const saved = localStorage.getItem('currentUser');
    if (saved) {
        try {
            currentUser = JSON.parse(saved);
            showProfilePage();
        } catch(e) {}
    }
}

function initDefaultProducts() {
    if (!localStorage.getItem('productsInitialized')) {
        allProducts = [
            { id: '1', name: '‚ú® Gold Pendant', price: 2500, category: 'jewelry', description: 'Premium 18K gold with certified diamond.', image: 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 300 300%22%3E%3Crect fill=%22%23FFD700%22 width=%22300%22 height=%22300%22/%3E%3Ctext x=%22150%22 y=%22160%22 font-size=%2240%22 fill=%22%23fff%22 text-anchor=%22middle%22%3Eüíé%3C/text%3E%3C/svg%3E', avgRating: 5 },
            { id: '2', name: 'üëó Red Saree', price: 3500, category: 'sarees', description: 'Premium silk with traditional design.', image: 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 300 300%22%3E%3Crect fill=%22%23DD0000%22 width=%22300%22 height=%22300%22/%3E%3Ctext x=%22150%22 y=%22160%22 font-size=%2240%22 fill=%22%23FFD700%22 text-anchor=%22middle%22%3Eüëó%3C/text%3E%3C/svg%3E', avgRating: 5 },
            { id: '3', name: 'üë† Blue Dress', price: 1800, category: 'dresses', description: 'Modern designer dress.', image: 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 300 300%22%3E%3Crect fill=%220052CC%22 width=%22300%22 height=%22300%22/%3E%3Ctext x=%22150%22 y=%22160%22 font-size=%2240%22 fill=%22%23FFD700%22 text-anchor=%22middle%22%3Eüëö%3C/text%3E%3C/svg%3E', avgRating: 4 },
            { id: '4', name: 'üíé Pearl Bracelet', price: 1200, category: 'jewelry', description: 'Handcrafted with premium pearls.', image: 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 300 300%22%3E%3Crect fill=%22%23F5F5F5%22 width=%22300%22 height=%22300%22/%3E%3Ctext x=%22150%22 y=%22160%22 font-size=%2240%22 fill=%22%23FFD700%22 text-anchor=%22middle%22%3Eüíç%3C/text%3E%3C/svg%3E', avgRating: 5 },
            { id: '5', name: '‚ú® Designer Handbag', price: 4500, category: 'accessories', description: 'Luxury handbag with premium leather.', image: 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 300 300%22%3E%3Crect fill=%238B6914%22 width=%22300%22 height=%22300%22/%3E%3Ctext x=%22150%22 y=%22160%22 font-size=%2240%22 fill=%22%23FFD700%22 text-anchor=%22middle%22%3Eüëú%3C/text%3E%3C/svg%3E', avgRating: 5 }
        ];
        saveAllData();
        localStorage.setItem('productsInitialized', 'true');
    }
}

// ===== CONTACT LINKS =====
function loadContactLinks() {
    const saved = localStorage.getItem('contactLinks');
    if (saved) {
        try {
            contactLinks = JSON.parse(saved);
        } catch(e) {
            setDefaultContactLinks();
        }
    } else {
        setDefaultContactLinks();
    }
}

function setDefaultContactLinks() {
    contactLinks = {
        gmail: 'royalperfect2002@gmail.com',
        whatsapp: '918220390911',
        insta: 'https://instagram.com',
        youtube: 'https://youtube.com'
    };
}

function saveContactLinks() {
    const gmail = document.getElementById('gmailEmail').value || 'royalperfect2002@gmail.com';
    const whatsapp = document.getElementById('whatsappNumber').value || '918220390911';
    const insta = document.getElementById('instaUrl').value || 'https://instagram.com';
    const youtube = document.getElementById('youtubeUrl').value || 'https://youtube.com';
    
    contactLinks = { gmail, whatsapp, insta, youtube };
    localStorage.setItem('contactLinks', JSON.stringify(contactLinks));
    syncDataToFirebase();
    updateSocialLinks();
    showNotification('‚úÖ Links saved!');
}

function updateSocialLinks() {
    if (!contactLinks.gmail) loadContactLinks();
    
    const gmailEmail = contactLinks.gmail || 'royalperfect2002@gmail.com';
    const whatsappNum = contactLinks.whatsapp || '918220390911';
    const instaUrl = contactLinks.insta || 'https://instagram.com';
    const youtubeUrl = contactLinks.youtube || 'https://youtube.com';
    
    document.getElementById('gmailLink').href = `mailto:${gmailEmail}`;
    document.getElementById('whatsappLink').href = `https://wa.me/${whatsappNum}`;
    document.getElementById('instaLink').href = instaUrl;
    document.getElementById('youtubeLink').href = youtubeUrl;
}

// ===== SOCIAL ICONS =====
function loadSocialIcons() {
    const icons = localStorage.getItem('socialIcons');
    if (icons) {
        try {
            const data = JSON.parse(icons);
            if (data.gmail) document.getElementById('gmailImg').src = data.gmail;
            if (data.whatsapp) document.getElementById('whatsappImg').src = data.whatsapp;
            if (data.insta) document.getElementById('instaImg').src = data.insta;
            if (data.youtube) document.getElementById('youtubeImg').src = data.youtube;
        } catch(e) {}
    }
}

function uploadGmailIcon() {
    const file = document.getElementById('gmailIconInput').files[0];
    if (!file) { showNotification('‚ùå Select image'); return; }
    const reader = new FileReader();
    reader.onload = function(e) {
        document.getElementById('gmailImg').src = e.target.result;
        saveSocialIcons({gmail: e.target.result});
        showNotification('‚úÖ Gmail icon uploaded!');
    };
    reader.readAsDataURL(file);
}

function uploadWhatsappIcon() {
    const file = document.getElementById('whatsappIconInput').files[0];
    if (!file) { showNotification('‚ùå Select image'); return; }
    const reader = new FileReader();
    reader.onload = function(e) {
        document.getElementById('whatsappImg').src = e.target.result;
        saveSocialIcons({whatsapp: e.target.result});
        showNotification('‚úÖ WhatsApp icon uploaded!');
    };
    reader.readAsDataURL(file);
}

function uploadInstaIcon() {
    const file = document.getElementById('instaIconInput').files[0];
    if (!file) { showNotification('‚ùå Select image'); return; }
    const reader = new FileReader();
    reader.onload = function(e) {
        document.getElementById('instaImg').src = e.target.result;
        saveSocialIcons({insta: e.target.result});
        showNotification('‚úÖ Instagram icon uploaded!');
    };
    reader.readAsDataURL(file);
}

function uploadYoutubeIcon() {
    const file = document.getElementById('youtubeIconInput').files[0];
    if (!file) { showNotification('‚ùå Select image'); return; }
    const reader = new FileReader();
    reader.onload = function(e) {
        document.getElementById('youtubeImg').src = e.target.result;
        saveSocialIcons({youtube: e.target.result});
        showNotification('‚úÖ YouTube icon uploaded!');
    };
    reader.readAsDataURL(file);
}

function saveSocialIcons(newData) {
    let icons = localStorage.getItem('socialIcons') ? JSON.parse(localStorage.getItem('socialIcons')) : {};
    icons = {...icons, ...newData};
    localStorage.setItem('socialIcons', JSON.stringify(icons));
    syncDataToFirebase();
}

// ===== PRODUCTS =====

        // PAGINATION VARIABLES
        let currentPage = 1;
        let itemsPerPage = 9; // 3x3 grid
        let totalPages = 1;
        let paginatedProducts = [];

        // Initialize pagination
        function initPagination() {
            if (allProducts && allProducts.length > 0) {
                totalPages = Math.ceil(allProducts.length / itemsPerPage);
                currentPage = 1;
                updatePaginationDisplay();
                displayPaginatedProducts();
            }
        }

        // Display products for current page
        function displayPaginatedProducts() {
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            paginatedProducts = allProducts.slice(startIndex, endIndex);
            displayProducts(paginatedProducts);
            updatePaginationButtons();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Next page
        function nextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                displayPaginatedProducts();
            }
        }

        // Previous page
        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                displayPaginatedProducts();
            }
        }

        // Update pagination button states
        function updatePaginationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const pageNumber = document.getElementById('pageNumber');
            const totalPagesSpan = document.getElementById('totalPages');

            if (prevBtn) {
                prevBtn.disabled = currentPage === 1;
                prevBtn.style.display = currentPage === 1 ? 'none' : 'block';
            }
            if (nextBtn) {
                nextBtn.disabled = currentPage === totalPages;
            }
            if (pageNumber) {
                pageNumber.textContent = 'Page ' + currentPage;
            }
            if (totalPagesSpan) {
                totalPagesSpan.textContent = totalPages;
            }
        }

        // Update pagination display
        function updatePaginationDisplay() {
            const pageNumber = document.getElementById('pageNumber');
            const totalPagesSpan = document.getElementById('totalPages');
            if (pageNumber) pageNumber.textContent = 'Page ' + currentPage;
            if (totalPagesSpan) totalPagesSpan.textContent = totalPages;
            updatePaginationButtons();
        }
        // UPDATE PAGINATION SETTINGS
        function updatePaginationSettings() {
            const input = document.getElementById('itemsPerPage');
            if (input && input.value > 0) {
                itemsPerPage = parseInt(input.value);
                currentPage = 1;
                totalPages = Math.ceil(allProducts.length / itemsPerPage);
                displayPaginatedProducts();
                alert('‚úÖ Pagination updated! Items per page: ' + itemsPerPage);
            }
        }

        // OLD UPDATE SETTINGS (KEPT FOR COMPATIBILITY)
        function updatePaginationSettingsOld() {
            const itemsInput = document.getElementById('itemsPerPage');
            if (itemsInput && itemsInput.value > 0) {
                itemsPerPage = parseInt(itemsInput.value);
                resetPagination();
                displayPaginatedProducts();
                alert('Pagination settings updated! Items per page: ' + itemsPerPage);
            } else {
                alert('Please enter a valid number');
            }
        }

        // LOAD SAMPLE PRODUCTS FOR TESTING
        function loadSampleProducts() {
            allProducts = [...sampleProducts];
            currentPage = 1;
            totalPages = Math.ceil(allProducts.length / itemsPerPage);
            filteredByPrice = [];
            displayPaginatedProducts();
            loadAdminData();
            alert('‚úÖ Loaded 55 sample products! Total pages: ' + totalPages);
        }

        // OLD LOAD SAMPLE (KEPT FOR COMPATIBILITY)
        function loadSampleProductsOld() {
            if (sampleProducts && sampleProducts.length > 0) {
                allProducts = [...sampleProducts];
                initPagination();
                displayPaginatedProducts();
            }
        }

        // Reset pagination for new product set
        function resetPagination() {
            currentPage = 1;
            initPagination();
        }


        function displayProducts(products = allProducts) {
    const grid = document.getElementById('productsGrid');
    if (!products || products.length === 0) {
        grid.innerHTML = '<div style="color: var(--text-secondary); padding: 60px 20px; text-align: center; grid-column: 1/-1;">No products found</div>';
        return;
    }
    grid.innerHTML = products.map(p => `
        <div class="product-item" onclick="viewProduct('${p.id}')">
            <div class="product-image" style="background-image: url('${p.image}');"></div>
            <div class="product-body">
                <div class="product-name">${p.name}</div>
                <div class="product-rating">${'‚≠ê'.repeat(Math.round(p.avgRating || 5))}</div>
                <div class="product-price">‚Çπ${p.price.toLocaleString()}</div>
                <div class="product-buttons">
                    <button class="btn-add-cart" onclick="event.stopPropagation(); addToCart('${p.id}')">Add</button>
                    <button class="btn-view-detail" onclick="event.stopPropagation(); viewProduct('${p.id}')">View</button>
                </div>
            </div>
        </div>
    `).join('');
    updatePaginationDisplay();
}

function viewProduct(id) {
    currentProductId = id;
    const product = allProducts.find(p => p.id === id);
    if (!product) return;
    document.getElementById('detailImage').style.backgroundImage = `url('${product.image}')`;
    document.getElementById('detailName').textContent = product.name;
    document.getElementById('detailPrice').textContent = product.price.toLocaleString();
    document.getElementById('detailRating').innerHTML = '‚≠ê'.repeat(Math.round(product.avgRating || 5)) + ` (${Math.round(product.avgRating || 5)}.0/5)`;
    document.getElementById('detailDesc').textContent = product.description;
    loadReviews(id);
    goToDetail();
}

// ===== REVIEWS & RATINGS =====
function setRating(rating) {
    currentRating = rating;
    document.querySelectorAll('#starRating .star').forEach((star, index) => {
        if (index < rating) {
            star.classList.add('active');
        } else {
            star.classList.remove('active');
        }
    });
    document.getElementById('selectedRating').textContent = rating;
}

function submitReview() {
    const author = document.getElementById('reviewAuthor').value.trim();
    const text = document.getElementById('reviewText').value.trim();
    
    if (!author || !text || currentRating === 0) {
        showNotification('‚ùå Fill all fields and select rating!');
        return;
    }
    
    const review = {
        id: Date.now().toString(),
        productId: currentProductId,
        author: author,
        rating: currentRating,
        text: text,
        date: new Date().toISOString()
    };
    
    allReviews.push(review);
    
    const product = allProducts.find(p => p.id === currentProductId);
    if (product) {
        const productReviews = allReviews.filter(r => r.productId === currentProductId);
        product.avgRating = Math.round(productReviews.reduce((sum, r) => sum + r.rating, 0) / productReviews.length);
    }
    
    saveAllData();
    document.getElementById('reviewAuthor').value = '';
    document.getElementById('reviewText').value = '';
    currentRating = 0;
    document.querySelectorAll('#starRating .star').forEach(s => s.classList.remove('active'));
    document.getElementById('selectedRating').textContent = '0';
    
    loadReviews(currentProductId);
    displayProducts();
    showNotification('‚úÖ Review submitted!');
}

function loadReviews(productId) {
    const reviews = allReviews.filter(r => r.productId === productId);
    const container = document.getElementById('reviewsList');
    if (reviews.length === 0) {
        container.innerHTML = '<div style="color: var(--text-secondary); padding: 20px;">No reviews yet. Be first!</div>';
        return;
    }
    container.innerHTML = reviews.map(r => `
        <div class="review-item">
            <div class="review-header">
                <div class="review-author">üë§ ${r.author}</div>
                <div class="review-date">${new Date(r.date).toLocaleDateString()}</div>
            </div>
            <div class="review-rating">${'‚≠ê'.repeat(r.rating)}</div>
            <div class="review-text">"${r.text}"</div>
        </div>
    `).join('');
}

// ===== CART FUNCTIONS =====
function addToCart(id) {
    const product = allProducts.find(p => p.id === id);
    if (!product) return;
    const existing = cart.find(c => c.id === id);
    if (existing) existing.qty++;
    else cart.push({ ...product, qty: 1 });
    saveAllData();
    updateCartBadge();
    showNotification('‚úÖ Added to cart!');
}

function removeFromCart(id) {
    cart = cart.filter(c => c.id !== id);
    saveAllData();
    updateCart();
    updateCartBadge();
}

function updateQty(id, qty) {
    const item = cart.find(c => c.id === id);
    if (item) {
        item.qty = Math.max(1, parseInt(qty));
        saveAllData();
        updateCart();
    }
}

function updateCart() {
    const container = document.getElementById('cartItemsContainer');
    if (cart.length === 0) {
        container.innerHTML = '<div style="color: var(--text-secondary); text-align: center; padding: 40px;">Empty</div>';
        document.getElementById('subtotalPrice').textContent = '‚Çπ0';
        document.getElementById('totalPrice').textContent = '‚Çπ0';
        return;
    }
    
    container.innerHTML = cart.map(item => `
        <div style="display: flex; gap: 12px; padding: 12px; background: var(--primary); border: 1px solid var(--border); border-radius: 8px; margin-bottom: 12px;">
            <div style="width: 70px; height: 70px; background-image: url('${item.image}'); background-size: cover; border-radius: 6px;"></div>
            <div style="flex: 1;">
                <div style="color: var(--gold); font-weight: 700;">${item.name}</div>
                <div style="color: var(--text-secondary); font-size: 12px;">‚Çπ${item.price.toLocaleString()} √ó ${item.qty}</div>
                <div style="display: flex; gap: 5px; margin-top: 8px;">
                    <button class="btn-secondary" onclick="updateQty('${item.id}', ${item.qty - 1})" style="padding: 4px 8px;">‚àí</button>
                    <input type="number" value="${item.qty}" onchange="updateQty('${item.id}', this.value)" style="width: 35px; background: var(--primary); border: 1px solid var(--border); padding: 4px; text-align: center; color: var(--text-primary);">
                    <button class="btn-secondary" onclick="updateQty('${item.id}', ${item.qty + 1})" style="padding: 4px 8px;">+</button>
                    <button class="btn-delete" onclick="removeFromCart('${item.id}')" style="padding: 4px 8px;">Remove</button>
                </div>
            </div>
        </div>
    `).join('');
    
    const total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
    document.getElementById('subtotalPrice').textContent = `‚Çπ${total.toLocaleString()}`;
    document.getElementById('totalPrice').textContent = `‚Çπ${total.toLocaleString()}`;
}

function updateCartBadge() {
    const count = cart.reduce((sum, item) => sum + item.qty, 0);
    [document.getElementById('cartBadge'), document.getElementById('cartBadge2'), document.getElementById('cartBadge3'), document.getElementById('cartBadge4')].forEach(el => el && (el.textContent = count));
}

function openCart() {
    updateCart();
    document.getElementById('cartModal').classList.add('active');
}

function closeCart() {
    document.getElementById('cartModal').classList.remove('active');
}

function proceedCheckout() {
    if (cart.length === 0) {
        showNotification('‚ùå Cart empty');
        return;
    }
    if (!currentUser) {
        showNotification('‚ùå Login first!');
        goToAuth();
        return;
    }
    
    const total = cart.reduce((s, c) => s + (c.price * c.qty), 0);
    const items = cart.map(c => `${c.name} (√ó${c.qty})`).join('\n');
    const address = `${currentUser.address}, ${currentUser.city}, ${currentUser.state} ${currentUser.postal}`;
    const whatsappNum = contactLinks.whatsapp || '918220390911';
    const msg = `üõçÔ∏è NEW ORDER\n\nüë§ Customer: ${currentUser.name}\nüì± Mobile: ${currentUser.mobile}\nüìß Email: ${currentUser.email}\nüìç Address: ${address}\n\nüì¶ Items:\n${items}\n\nüí∞ Total: ‚Çπ${total.toLocaleString()}`;
    
    window.open(`https://wa.me/${whatsappNum}?text=${encodeURIComponent(msg)}`, '_blank');
    
    allOrders.push({ id: Date.now().toString(), customer: currentUser.name, mobile: currentUser.mobile, address: address, items: cart, total: total, date: new Date().toISOString() });
    cart = [];
    saveAllData();
    updateCartBadge();
    closeCart();
    showNotification('‚úÖ Order sent!');
}

// ===== PAGE NAVIGATION =====
function goHome() {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('homePage').classList.add('active');
    window.scrollTo(0, 0);
}

function goToDetail() {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('productDetailPage').classList.add('active');
    window.scrollTo(0, 0);
}

function goToAuth() {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('authPage').classList.add('active');
    window.scrollTo(0, 0);
}

function showProfilePage() {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('profilePage').classList.add('active');
    displayProfileData();
    window.scrollTo(0, 0);
}

// ===== FILTERS & SEARCH =====
function filterByCategory(cat) {
    if (cat === 'all') displayProducts();
    else displayProducts(allProducts.filter(p => p.category === cat));
}

function searchProducts() {
    const query = document.getElementById('searchBox').value.toLowerCase();
    displayProducts(allProducts.filter(p => p.name.toLowerCase().includes(query) || p.description.toLowerCase().includes(query)));
}

function applyFilters() {
    const ranges = [[0,10], [10,50], [50,100], [100,200], [200,500], [500,1000], [1000,2000], [2000,3000], [3000,5000]];
    const selected = [];
    for (let i = 1; i <= 9; i++) {
        if (document.getElementById('price' + i).checked) selected.push(ranges[i-1]);
    }
    if (selected.length === 0) {
        displayProducts(allProducts);
        resetPagination();
        return;
    }
    const filtered = allProducts.filter(p => selected.some(r => p.price >= r[0] && p.price < r[1]));
    allProducts = filtered;
    resetPagination();
    displayPaginatedProducts();
}


        // ===== PAGINATION FUNCTIONS (ADDED FOR MULTI-PAGE DISPLAY) =====
        function displayPaginatedProducts() {
            const startIdx = (currentPage - 1) * itemsPerPage;
            const endIdx = startIdx + itemsPerPage;
            const productsSource = filteredByPrice.length > 0 ? filteredByPrice : allProducts;
            const productsToShow = productsSource.slice(startIdx, endIdx);
            displayProducts(productsToShow);
            updatePaginationButtonStates();
        }

        function updatePaginationButtonStates() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const pageNum = document.getElementById('pageNumber');
            const totalNum = document.getElementById('totalPages');

            if (prevBtn) {
                prevBtn.disabled = currentPage === 1;
                prevBtn.style.opacity = currentPage === 1 ? '0.5' : '1';
            }
            if (nextBtn) {
                nextBtn.disabled = currentPage === totalPages;
                nextBtn.style.opacity = currentPage === totalPages ? '0.5' : '1';
            }
            if (pageNum) pageNum.textContent = currentPage;
            if (totalNum) totalNum.textContent = totalPages;
        }

        function nextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                displayPaginatedProducts();
                window.scrollTo({top: 0, behavior: 'smooth'});
            }
        }

        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                displayPaginatedProducts();
                window.scrollTo({top: 0, behavior: 'smooth'});
            }
        }

        function resetPagination() {
            currentPage = 1;
            filteredByPrice = [];
            const productsCount = allProducts.length > 0 ? allProducts.length : 1;
            totalPages = Math.ceil(productsCount / itemsPerPage);
            if (totalPages < 1) totalPages = 1;
        }

        // ===== END PAGINATION FUNCTIONS =====

        function clearFilters() {
    document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
    loadAllData();
    resetPagination();
}

function addDetailToCart() {
    addToCart(currentProductId);
}

// ===== AUTH FUNCTIONS =====
function switchAuthTab(tab) {
    document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
    document.querySelectorAll('.auth-tab').forEach(b => b.classList.remove('active'));
    document.getElementById(tab + 'Form').classList.add('active');
    event.target.classList.add('active');
}

function handleLogin(event) {
    event.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const pass = document.getElementById('loginPassword').value;
    const user = allUsers.find(u => (u.email === email || u.mobile === email) && u.password === pass);
    if (user) {
        currentUser = user;
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        syncDataToFirebase();
        showNotification('‚úÖ Login successful!');
        setTimeout(() => showProfilePage(), 1000);
    } else {
        showNotification('‚ùå Invalid credentials!');
    }
}

function handleSignup(event) {
    event.preventDefault();
    const name = document.getElementById('signupName').value;
    const email = document.getElementById('signupEmail').value;
    const mobile = document.getElementById('signupMobile').value;
    const address = document.getElementById('signupAddress').value;
    const city = document.getElementById('signupCity').value;
    const state = document.getElementById('signupState').value;
    const postal = document.getElementById('signupPostal').value;
    const password = document.getElementById('signupPassword').value;
    const confirm = document.getElementById('signupConfirm').value;
    
    if (password !== confirm) {
        showNotification('‚ùå Passwords do not match!');
        return;
    }
    
    if (allUsers.find(u => u.email === email)) {
        showNotification('‚ùå Email exists!');
        return;
    }
    
    const newUser = { id: Date.now().toString(), name, email, mobile, address, city, state, postal, password, createdAt: new Date().toISOString() };
    allUsers.push(newUser);
    currentUser = newUser;
    localStorage.setItem('currentUser', JSON.stringify(currentUser));
    saveAllData();
    showNotification('‚úÖ Account created!');
    setTimeout(() => showProfilePage(), 1000);
}

// ===== PROFILE FUNCTIONS =====
function displayProfileData() {
    if (!currentUser) return;
    document.getElementById('profileName').textContent = currentUser.name || 'N/A';
    document.getElementById('profileEmail').textContent = currentUser.email || 'N/A';
    document.getElementById('profileMobile').textContent = currentUser.mobile || 'N/A';
    document.getElementById('profileAddress').textContent = currentUser.address || 'N/A';
    document.getElementById('profileCity').textContent = currentUser.city || 'N/A';
    document.getElementById('profileState').textContent = currentUser.state || 'N/A';
    document.getElementById('profilePostal').textContent = currentUser.postal || 'N/A';
}

function openEditPersonal() {
    if (!currentUser) return;
    document.getElementById('editName').value = currentUser.name;
    document.getElementById('editEmail').value = currentUser.email;
    document.getElementById('editMobile').value = currentUser.mobile;
    document.getElementById('editPersonalModal').classList.add('active');
}

function closeEditPersonal() {
    document.getElementById('editPersonalModal').classList.remove('active');
}

function savePersonalInfo() {
    if (!currentUser) return;
    currentUser.name = document.getElementById('editName').value;
    currentUser.email = document.getElementById('editEmail').value;
    currentUser.mobile = document.getElementById('editMobile').value;
    const userIndex = allUsers.findIndex(u => u.id === currentUser.id);
    if (userIndex !== -1) allUsers[userIndex] = currentUser;
    localStorage.setItem('currentUser', JSON.stringify(currentUser));
    saveAllData();
    closeEditPersonal();
    displayProfileData();
    showNotification('‚úÖ Updated!');
}

function openEditAddress() {
    if (!currentUser) return;
    document.getElementById('editAddress').value = currentUser.address || '';
    document.getElementById('editCity').value = currentUser.city || '';
    document.getElementById('editState').value = currentUser.state || '';
    document.getElementById('editPostal').value = currentUser.postal || '';
    document.getElementById('editAddressModal').classList.add('active');
}

function closeEditAddress() {
    document.getElementById('editAddressModal').classList.remove('active');
}

function saveAddressInfo() {
    if (!currentUser) return;
    currentUser.address = document.getElementById('editAddress').value;
    currentUser.city = document.getElementById('editCity').value;
    currentUser.state = document.getElementById('editState').value;
    currentUser.postal = document.getElementById('editPostal').value;
    const userIndex = allUsers.findIndex(u => u.id === currentUser.id);
    if (userIndex !== -1) allUsers[userIndex] = currentUser;
    localStorage.setItem('currentUser', JSON.stringify(currentUser));
    saveAllData();
    closeEditAddress();
    displayProfileData();
    showNotification('‚úÖ Address saved!');
}

function logout() {
    if (confirm('Logout?')) {
        currentUser = null;
        localStorage.removeItem('currentUser');
        document.getElementById('loginEmail').value = '';
        document.getElementById('loginPassword').value = '';
        showNotification('‚úÖ Logged out');
        goHome();
    }
}

// ===== ADMIN FUNCTIONS =====
function openAdminModal() {
    document.getElementById('adminModal').classList.add('active');
    document.getElementById('adminPasswordSection').style.display = 'block';
    document.getElementById('adminContent').style.display = 'none';
}

function closeAdminModal() {
    document.getElementById('adminModal').classList.remove('active');
}

function verifyAdmin() {
    const pass = document.getElementById('adminPass').value;
    if (pass === ADMIN_PASSWORD) {
        document.getElementById('adminPasswordSection').style.display = 'none';
        document.getElementById('adminContent').style.display = 'block';
        document.getElementById('adminPass').value = '';
        loadAdminData();
        loadContactLinksInAdmin();
    } else {
        showNotification('‚ùå Wrong password!');
    }
}

function loadContactLinksInAdmin() {
    document.getElementById('gmailEmail').value = contactLinks.gmail || 'royalperfect2002@gmail.com';
    document.getElementById('whatsappNumber').value = contactLinks.whatsapp || '918220390911';
    document.getElementById('instaUrl').value = contactLinks.insta || 'https://instagram.com';
    document.getElementById('youtubeUrl').value = contactLinks.youtube || 'https://youtube.com';
}

function uploadVideo() {
    const file = document.getElementById('videoFileInput').files[0];
    if (!file) {
        showNotification('‚ùå Select video');
        return;
    }
    const reader = new FileReader();
    reader.onload = function(e) {
        document.getElementById('videoSource').src = e.target.result;
        document.getElementById('bannerVideo').load();
        localStorage.setItem('bannerVideoUrl', e.target.result);
        syncDataToFirebase();
        showNotification('‚úÖ Video uploaded!');
    };
    reader.readAsDataURL(file);
}

function addProduct() {
            const name = document.getElementById('newProductName').value.trim();
            const price = parseInt(document.getElementById('newProductPrice').value);
            const category = document.getElementById('newProductCategory').value;
            const desc = document.getElementById('newProductDesc').value.trim();

            if (!name || !price || !category || !desc) {
                alert('‚ùå Please fill all fields');
                return;
            }

            if (allProducts.length >= 10001) {
                alert('‚ö†Ô∏è Maximum 10000+ products reached. Delete some products to add more.');
                return;
            }

            const newProduct = {
                id: 'prod_' + Date.now(),
                name: name,
                price: price,
                category: category,
                description: desc,
                image: 'https://via.placeholder.com/250?text=' + encodeURIComponent(name),
                avgRating: 5
            };

            allProducts.push(newProduct);

            document.getElementById('newProductName').value = '';
            document.getElementById('newProductPrice').value = '';
            document.getElementById('newProductCategory').value = categories[0]?.id || '';
            document.getElementById('newProductDesc').value = '';

            filteredByPrice = [];
            currentPage = 1;
            totalPages = Math.ceil(allProducts.length / itemsPerPage);

            saveAllData();
            displayPaginatedProducts();
            loadProductsEditList();

            alert('‚úÖ Product added! Total: ' + allProducts.length);
        }

function deleteProduct(id) {
    if (confirm('Delete product?')) {
        allProducts = allProducts.filter(p => p.id !== id);
        allReviews = allReviews.filter(r => r.productId !== id);
        saveAllData();
        displayProducts();
        resetPagination();
        loadAdminData();
        showNotification('‚úÖ Deleted!');
    }
}

function editProductImage(id) {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    input.onchange = function(e) {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function(event) {
            const product = allProducts.find(p => p.id === id);
            if (product) {
                product.image = event.target.result;
                saveAllData();
                loadAdminData();
                showNotification('‚úÖ Image updated!');
            }
        };
        reader.readAsDataURL(file);
    };
    input.click();
}

function editProductPrice(id) {
    const product = allProducts.find(p => p.id === id);
    if (!product) return;
    const newPrice = prompt('Edit Price (‚Çπ):', product.price);
    if (newPrice && !isNaN(newPrice)) {
        product.price = parseInt(newPrice);
        saveAllData();
        displayProducts();
        loadAdminData();
        showNotification('‚úÖ Price updated!');
    }
}

function editProductName(id) {
    const product = allProducts.find(p => p.id === id);
    if (!product) return;
    const newName = prompt('Edit Name:', product.name);
    if (newName) {
        product.name = newName;
        saveAllData();
        displayProducts();
        loadAdminData();
        showNotification('‚úÖ Name updated!');
    }
}

function editProductDesc(id) {
    const product = allProducts.find(p => p.id === id);
    if (!product) return;
    const newDesc = prompt('Edit Description:', product.description);
    if (newDesc) {
        product.description = newDesc;
        saveAllData();
        displayProducts();
        loadAdminData();
        showNotification('‚úÖ Description updated!');
    }
}

function editReview(reviewId) {
    const review = allReviews.find(r => r.id === reviewId);
    if (!review) return;
    
    const newRating = prompt('Edit Rating (1-5):', review.rating);
    if (newRating && newRating >= 1 && newRating <= 5) {
        review.rating = parseInt(newRating);
        const newText = prompt('Edit Review Text:', review.text);
        if (newText) {
            review.text = newText;
            
            const product = allProducts.find(p => p.id === review.productId);
            if (product) {
                const productReviews = allReviews.filter(r => r.productId === review.productId);
                product.avgRating = Math.round(productReviews.reduce((sum, r) => sum + r.rating, 0) / productReviews.length);
            }
            
            saveAllData();
            loadAdminData();
            displayProducts();
            showNotification('‚úÖ Review updated!');
        }
    }
}

function deleteReview(reviewId) {
    if (confirm('Delete review?')) {
        const review = allReviews.find(r => r.id === reviewId);
        allReviews = allReviews.filter(r => r.id !== reviewId);
        
        const product = allProducts.find(p => p.id === review.productId);
        if (product) {
            const productReviews = allReviews.filter(r => r.productId === review.productId);
            if (productReviews.length > 0) {
                product.avgRating = Math.round(productReviews.reduce((sum, r) => sum + r.rating, 0) / productReviews.length);
            } else {
                product.avgRating = 5;
            }
        }
        
        saveAllData();
        loadAdminData();
        displayProducts();
        showNotification('‚úÖ Review deleted!');
    }
}

function switchAdminTab(tab) {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(tab + 'Tab').classList.add('active');
    event.target.classList.add('active');
}

function loadAdminData() {
            loadAdminDataWithCategories();    // PRODUCTS LIST
    const list = document.getElementById('adminProductsList');
    list.innerHTML = allProducts.length === 0 
        ? '<p style="color: var(--text-secondary); padding: 20px;">No products</p>'
        : allProducts.map(p => `
            <div style="display: flex; gap: 15px; padding: 15px; background: var(--primary); border: 1px solid var(--border); border-radius: 8px; margin-bottom: 12px;">
                <div style="width: 80px; height: 80px; background-image: url('${p.image}'); background-size: cover; border-radius: 6px;"></div>
                <div style="flex: 1;">
                    <div style="color: var(--gold); font-weight: 700; margin-bottom: 8px;">‚Çπ${p.price.toLocaleString()}</div>
                    <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 8px;">${p.name}</div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <button class="btn-edit" onclick="editProductImage('${p.id}')">üñºÔ∏è Image</button>
                        <button class="btn-edit" onclick="editProductPrice('${p.id}')">üí∞ Price</button>
                        <button class="btn-edit" onclick="editProductName('${p.id}')">‚úèÔ∏è Name</button>
                        <button class="btn-edit" onclick="editProductDesc('${p.id}')">üìù Desc</button>
                        <button class="btn-delete" onclick="deleteProduct('${p.id}')">üóëÔ∏è Delete</button>
                    </div>
                </div>
            </div>
        `).join('');
    
    // REVIEWS LIST
    const reviewsList = document.getElementById('adminReviewsList');
    if (allReviews.length === 0) {
        reviewsList.innerHTML = '<p style="color: var(--text-secondary); padding: 20px;">No reviews yet</p>';
    } else {
        reviewsList.innerHTML = allReviews.map(r => {
            const product = allProducts.find(p => p.id === r.productId);
            return `
                <div style="background: var(--primary); padding: 15px; border-radius: 8px; margin-bottom: 12px; border: 1px solid var(--border);">
                    <div style="color: var(--gold); font-weight: 700; margin-bottom: 5px;">üì¶ ${product ? product.name : 'Product Deleted'}</div>
                    <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 5px;">üë§ ${r.author} - ${new Date(r.date).toLocaleDateString()}</div>
                    <div style="color: var(--warning); font-size: 14px; margin-bottom: 8px;">${'‚≠ê'.repeat(r.rating)}</div>
                    <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 10px; border-left: 2px solid var(--gold); padding-left: 10px; font-style: italic;">"${r.text}"</div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn-edit" onclick="editReview('${r.id}')">‚úèÔ∏è Edit</button>
                        <button class="btn-delete" onclick="deleteReview('${r.id}')">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `;
        }).join('');
    }
    
    // ORDERS LIST
    const orders = document.getElementById('adminOrdersList');
    orders.innerHTML = allOrders.length === 0 
        ? '<p style="color: var(--text-secondary); padding: 20px;">No orders</p>'
        : allOrders.map(o => `
            <div style="background: var(--primary); padding: 15px; border-radius: 8px; margin-bottom: 12px; border: 1px solid var(--border);">
                <div style="color: var(--gold); font-weight: 700; margin-bottom: 5px;">üë§ ${o.customer} | üì± ${o.mobile}</div>
                <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 5px;">üìç ${o.address}</div>
                <div style="color: var(--gold); font-weight: 700;">üí∞ ‚Çπ${o.total.toLocaleString()}</div>
            </div>
        `).join('');
}

        // ===== UNLIMITED PRODUCT EDITING FUNCTIONS =====

        // ===== ADMIN: ENHANCED CATEGORY MANAGEMENT WITH HOME PAGE SYNC =====
        function displayCategoriesInAdmin() {
            const existingList = document.getElementById('existingCategoriesList');
            if (!existingList) {
                console.log('Categories list not found in admin');
                return;
            }

            if (!categories || categories.length === 0) {
                existingList.innerHTML = '<div style="padding: 10px; color: var(--text-secondary);">No categories yet. Add one above!</div>';
                return;
            }

            let html = '';
            categories.forEach(cat => {
                const iconDisplay = cat.iconType === 'image' && cat.iconData ? 
                    `<img src="${cat.iconData}" style="width: 30px; height: 30px; border-radius: 4px; object-fit: cover;">` : 
                    `<span style="font-size: 24px;">${cat.icon || 'üìÅ'}</span>`;

                html += `
                    <div style="padding: 12px; margin: 10px 0; background: var(--primary); border-left: 4px solid ${cat.color}; border-radius: 4px; display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <div style="font-size: 30px; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; background: rgba(212,175,55,0.1); border-radius: 4px;">
                                ${iconDisplay}
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: bold; color: var(--gold); margin-bottom: 5px;">${cat.name}</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">ID: ${cat.id} | Color: ${cat.color}</div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px;">
                            <button onclick="editCategoryName('${cat.id}')" style="background: var(--gold); color: var(--primary); border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 12px;">‚úèÔ∏è Name</button>
                            <button onclick="editCategoryIcon('${cat.id}')" style="background: var(--gold); color: var(--primary); border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 12px;">üñºÔ∏è Icon</button>
                            <button onclick="editCategoryColor('${cat.id}')" style="background: var(--gold); color: var(--primary); border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 12px;">üé® Color</button>
                            <button onclick="deleteCategory('${cat.id}')" style="background: var(--error); color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 12px;">üóëÔ∏è Delete</button>
                        </div>
                    </div>
                `;
            });

            existingList.innerHTML = html;
        }

        function editCategoryName(catId) {
            const cat = categories.find(c => c.id === catId);
            if (!cat) return;

            const newName = prompt('Edit category name:', cat.name);
            if (newName && newName.trim()) {
                cat.name = newName.trim();
                saveAllData();
                displayCategoriesInAdmin();
                updateHomePageCategories();
                alert('‚úÖ Category name updated!\nüîÑ Home page updated!\nüì¢ All customers see update!');
            }
        }

        function editCategoryIcon(catId) {
            const cat = categories.find(c => c.id === catId);
            if (!cat) return;

            const choice = prompt('Choose:\n1 = Upload image\n2 = Use emoji', '1');

            if (choice === '1') {
                // Upload image
                const fileInput = document.createElement('input');
                fileInput.type = 'file';
                fileInput.accept = 'image/*';
                fileInput.onchange = (e) => {
                    const file = e.target.files[0];
                    if (file && file.size < 5242880) {
                        const reader = new FileReader();
                        reader.onload = (event) => {
                            cat.iconData = event.target.result;
                            cat.iconType = 'image';
                            saveAllData();
                            displayCategoriesInAdmin();
                            updateHomePageCategories();
                            alert('‚úÖ Icon updated!\nüîÑ Home page updated!\nüì¢ All customers see update!');
                        };
                        reader.readAsDataURL(file);
                    } else {
                        alert('File too large (max 5MB)');
                    }
                };
                fileInput.click();
            } else if (choice === '2') {
                // Use emoji
                const emoji = prompt('Enter emoji (e.g., ‚åö üëú üíé):', cat.icon);
                if (emoji && emoji.trim()) {
                    cat.icon = emoji.trim();
                    cat.iconType = 'emoji';
                    cat.iconData = null;
                    saveAllData();
                    displayCategoriesInAdmin();
                    updateHomePageCategories();
                    alert('‚úÖ Icon updated!\nüîÑ Home page updated!\nüì¢ All customers see update!');
                }
            }
        }

        function editCategoryColor(catId) {
            const cat = categories.find(c => c.id === catId);
            if (!cat) return;

            const newColor = prompt('Enter color (hex code):', cat.color);
            if (newColor && newColor.match(/^#[0-9A-F]{6}$/i)) {
                cat.color = newColor;
                saveAllData();
                displayCategoriesInAdmin();
                updateHomePageCategories();
                alert('‚úÖ Color updated!\nüîÑ Home page updated!');
            } else if (newColor) {
                alert('Invalid color format. Use hex code like #d4af37');
            }
        }

        function deleteCategory(catId) {
            const cat = categories.find(c => c.id === catId);
            if (!cat) return;

            if (confirm(`Delete category "${cat.name}"?`)) {
                categories = categories.filter(c => c.id !== catId);
                saveAllData();
                updateProductCategoryOptions();
                displayCategoriesInAdmin();
                updateHomePageCategories();
                alert('‚úÖ Category deleted!\nüîÑ Home page updated!\nüì¢ All customers see update!');
            }
        }

        function updateHomePageCategories() {
            // Update categories display on home page
            const categoryDisplay = document.querySelector('#homePageCategoryList');
            if (categoryDisplay) {
                renderHomePageCategoryList();
            }
        }

        function renderHomePageCategoryList() {
            let categoryContainer = document.querySelector('.sidebar');
            if (!categoryContainer) return;

            let categorySection = categoryContainer.querySelector('#homePageCategoryList');
            if (!categorySection) {
                categorySection = document.createElement('div');
                categorySection.id = 'homePageCategoryList';
                categorySection.style.cssText = 'margin: 20px 0; padding: 15px; background: rgba(212,175,55,0.08); border-radius: 8px; border-left: 3px solid var(--gold);';

                let filterSection = categoryContainer.querySelector('.filter-section');
                if (filterSection) {
                    categoryContainer.insertBefore(categorySection, filterSection);
                } else {
                    categoryContainer.insertBefore(categorySection, categoryContainer.firstChild);
                }
            }

            let html = `
                <h3 style="color: var(--gold); margin: 0 0 10px 0; font-size: 14px;">üíé CATEGORIES</h3>
                <ul style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 6px;">
                    <li onclick="filterByCategory('all')" style="padding: 8px 10px; cursor: pointer; border-radius: 4px; display: flex; align-items: center; gap: 8px; background: rgba(212,175,55,0.1); transition: all 0.2s;">
                        <span style="font-size: 16px;">‚ú®</span>
                        <span style="font-size: 13px;">All Products</span>
                    </li>
            `;

            if (categories && categories.length > 0) {
                html += categories.map(cat => {
                    const iconHtml = cat.iconType === 'image' && cat.iconData ? 
                        `<img src="${cat.iconData}" style="width: 20px; height: 20px; border-radius: 3px; object-fit: cover;">` : 
                        `<span style="font-size: 16px;">${cat.icon || 'üìÅ'}</span>`;

                    return `
                        <li onclick="filterByCategory('${cat.id}')" style="padding: 8px 10px; cursor: pointer; border-radius: 4px; display: flex; align-items: center; gap: 8px; background: rgba(212,175,55,0.05); transition: all 0.2s; border-left: 2px solid ${cat.color};">
                            <div style="display: flex; align-items: center; justify-content: center; width: 20px; height: 20px;">
                                ${iconHtml}
                            </div>
                            <span style="font-size: 13px; color: var(--text-primary);">${cat.name}</span>
                        </li>
                    `;
                }).join('');
            }

            html += `</ul>`;
            categorySection.innerHTML = html;
        }

        function loadAdminCategoryData() {
            displayCategoriesInAdmin();
        }
        // ===== END ADMIN: ENHANCED CATEGORY MANAGEMENT =====

        function loadProductsEditList() {
            const list = document.getElementById('productsEditList');
            const search = document.getElementById('searchProduct').value.toLowerCase();

            let filteredProducts = allProducts.filter(p => 
                p.name.toLowerCase().includes(search)
            );

            if (filteredProducts.length === 0) {
                list.innerHTML = '<div style="padding: 10px; color: var(--text-secondary); text-align: center;">No products found</div>';
                return;
            }

            list.innerHTML = filteredProducts.map(p => `
                <div style="padding: 10px; margin: 5px 0; background: var(--secondary); border-left: 3px solid var(--gold); cursor: pointer; border-radius: 4px; transition: all 0.3s;" 
                     onclick="selectProductForEdit('${p.id}')"
                     id="productItem_${p.id}">
                    <div style="font-weight: bold; color: var(--gold);">${p.name}</div>
                    <div style="font-size: 12px; color: var(--text-secondary);">üí∞ ‚Çπ${p.price} | üìÅ ${p.category} | ID: ${p.id}</div>
                </div>
            `).join('');
        }

        function selectProductForEdit(productId) {
            const product = allProducts.find(p => p.id === productId);
            if (product) {
                document.getElementById('editProductId').value = productId;
                document.getElementById('editProductName').value = product.name;
                document.getElementById('editProductPrice').value = product.price;
                document.getElementById('editProductCategory').value = product.category;
                document.getElementById('editProductDescription').value = product.description;

                // Highlight selected product
                document.querySelectorAll('[id^="productItem_"]').forEach(el => {
                    el.style.borderLeft = '3px solid var(--gold)';
                    el.style.background = 'var(--secondary)';
                });
                document.getElementById('productItem_' + productId).style.borderLeft = '5px solid var(--gold-light)';
                document.getElementById('productItem_' + productId).style.background = 'rgba(212,175,55,0.2)';
            }
        }

        function saveProductEdit() {
            const id = document.getElementById('editProductId').value;
            if (!id) {
                alert('‚ùå Please select a product to edit');
                return;
            }

            const productIndex = allProducts.findIndex(p => p.id === id);
            if (productIndex > -1) {
                allProducts[productIndex].name = document.getElementById('editProductName').value;
                allProducts[productIndex].price = parseInt(document.getElementById('editProductPrice').value);
                allProducts[productIndex].category = document.getElementById('editProductCategory').value;
                allProducts[productIndex].description = document.getElementById('editProductDescription').value;

                saveAllData();
                loadProductsEditList();
                clearProductEditForm();
                alert('‚úÖ Product updated successfully!');
            }
        }

        function deleteProductEdit() {
            const id = document.getElementById('editProductId').value;
            if (!id) {
                alert('‚ùå Please select a product to delete');
                return;
            }

            if (confirm('‚ö†Ô∏è Are you sure you want to delete this product?')) {
                allProducts = allProducts.filter(p => p.id !== id);
                saveAllData();
                loadProductsEditList();
                clearProductEditForm();
                alert('‚úÖ Product deleted successfully!');
            }
        }

        function clearProductEditForm() {
            document.getElementById('editProductId').value = '';
            document.getElementById('editProductName').value = '';
            document.getElementById('editProductPrice').value = '';
            document.getElementById('editProductCategory').value = 'jewelry';
            document.getElementById('editProductDescription').value = '';
            document.querySelectorAll('[id^="productItem_"]').forEach(el => {
                el.style.borderLeft = '3px solid var(--gold)';
                el.style.background = 'var(--secondary)';
            });
        }

        // Search functionality
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('searchProduct');
            if (searchInput) {
                searchInput.addEventListener('input', loadProductsEditList);
            }
        });

        // Override loadAdminData to load product edit list
        function refreshAdminProductsList() {
            loadProductsEditList();
        }
        // ===== END UNLIMITED EDITING FUNCTIONS =====

        // ===== CATEGORY MANAGEMENT FUNCTIONS (NEW) =====
        function loadCategoriesList() {
            const list = document.getElementById('categoriesList');
            if (!list) return;

            if (categories.length === 0) {
                list.innerHTML = '<div style="padding: 10px; color: var(--text-secondary); text-align: center;">No categories yet</div>';
                return;
            }

            list.innerHTML = categories.map(cat => `
                <div style="padding: 12px; margin: 8px 0; background: var(--primary); border-left: 4px solid ${cat.color}; border-radius: 4px; display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-size: 24px; margin-bottom: 5px;">
                        ${cat.iconType === 'image' && cat.iconData ? 
                            `<img src="${cat.iconData}" style="width: 30px; height: 30px; border-radius: 4px;">` : 
                            cat.icon}
                    </div>
                        <div style="font-weight: bold; color: var(--gold);">${cat.name}</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">ID: ${cat.id}</div>
                    </div>
                    <div style="display: flex; gap: 5px;">
                        <button onclick="editCategory('${cat.id}')" style="background: var(--gold); color: var(--primary); border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-weight: bold;">‚úèÔ∏è Edit</button>
                        <button onclick="deleteCategory('${cat.id}')" style="background: var(--error); color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-weight: bold;">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function addCategory() {
            const name = document.getElementById('newCategoryName').value.trim();
            const icon = document.getElementById('newCategoryIcon').value.trim();
            const color = document.getElementById('newCategoryColor').value;

            if (!name) {
                alert('‚ùå Please enter category name');
                return;
            }

            if (!icon && !window.tempCategoryIconData) {
                alert('‚ùå Please enter emoji or upload icon image');
                return;
            }

            const newCategory = {
                id: 'cat_' + Date.now(),
                name: name,
                icon: icon || 'üìÅ',
                color: color,
                iconData: window.tempCategoryIconData?.data || null,
                iconType: window.tempCategoryIconData?.type || 'emoji'
            };

            categories.push(newCategory);

            updateProductCategoryOptions();

            document.getElementById('newCategoryName').value = '';
            document.getElementById('newCategoryIcon').value = '';
            document.getElementById('newCategoryColor').value = '#d4af37';
            document.getElementById('newCategoryIconUpload').value = '';
            window.tempCategoryIconData = null;

            loadCategoriesList();
            saveAllData();
            alert('‚úÖ Category added and synced to Firebase Storage!');
        }

        function editCategory(catId) {
            const category = categories.find(c => c.id === catId);
            if (!category) return;

            const newName = prompt('Edit category name:', category.name);
            if (newName && newName.trim()) {
                category.name = newName.trim();
                updateProductCategoryOptions();
                loadCategoriesList();
                saveAllData();
                alert('‚úÖ Category updated!');
            }
        }

        function deleteCategory(catId) {
            const category = categories.find(c => c.id === catId);
            if (!category) return;

            if (confirm(`‚ö†Ô∏è Delete category "${category.name}"? This will not delete products in this category.`)) {
                categories = categories.filter(c => c.id !== catId);
                updateProductCategoryOptions();
                loadCategoriesList();
                saveAllData();
                alert('‚úÖ Category deleted!');
            }
        }

        function updateProductCategoryOptions() {
            const selects = document.querySelectorAll('[id$="Category"], #newProductCategory, #editProductCategory');
            selects.forEach(select => {
                const currentValue = select.value;
                select.innerHTML = categories.map(cat => 
                    `<option value="${cat.id}">${cat.icon} ${cat.name}</option>`
                ).join('');
                select.value = currentValue || (categories.length > 0 ? categories[0].id : '');
            });
        }

        function getCategoryDisplay(categoryId) {
            const category = categories.find(c => c.id === categoryId);
            return category ? `${category.icon} ${category.name}` : categoryId;
        }

        // Load categories on admin access
        function loadAdminDataWithCategories() {
            loadCategoriesList();
            updateProductCategoryOptions();
            refreshAdminProductsList();
        }
        // ===== END CATEGORY MANAGEMENT FUNCTIONS =====

        // ===== CATEGORY ICON UPLOAD TO FIREBASE STORAGE =====
        function uploadCategoryIcon(file, categoryId) {
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                // Convert image to base64 and store in database
                const base64Data = e.target.result;
                const category = categories.find(c => c.id === categoryId);
                if (category) {
                    category.iconData = base64Data;
                    category.iconType = 'image';
                    saveAllData();
                    loadCategoriesList();
                    alert('‚úÖ Category icon uploaded and synced to Firebase!');
                }
            };
            reader.readAsDataURL(file);
        }

        function handleCategoryIconUpload(e) {
            const file = e.target.files[0];
            if (file) {
                // For new category being added
                if (!window.tempCategoryIconData) {
                    window.tempCategoryIconData = {};
                }
                const reader = new FileReader();
                reader.onload = (event) => {
                    window.tempCategoryIconData = {
                        data: event.target.result,
                        type: 'image'
                    };
                    alert('‚úÖ Icon uploaded! Click "Add Category" to save.');
                };
                reader.readAsDataURL(file);
            }
        }

        // Attach upload handler
        document.addEventListener('DOMContentLoaded', () => {
            const uploadInput = document.getElementById('newCategoryIconUpload');
            if (uploadInput) {
                uploadInput.addEventListener('change', handleCategoryIconUpload);
            }
        });
        // ===== END CATEGORY ICON UPLOAD =====

function showNotification(msg) {
    const notif = document.createElement('div');
    notif.className = 'notification';
    notif.textContent = msg;
    document.body.appendChild(notif);
    setTimeout(() => notif.remove(), 3000);
}
</script>

</body>
</html>
